(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-face-capture-resize"],{"275b":function(t,i,e){"use strict";e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var n={canvasCut:e("d689").default},a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"container"},[e("v-uni-view",[e("canvas-cut",{attrs:{phonew:t.width,phoneh:t.height},on:{save:function(i){arguments[0]=i=t.$handleEvent(i),t.save.apply(void 0,arguments)}}})],1)],1)},o=[]},"39db":function(t,i,e){"use strict";e.r(i);var n=e("4003"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},"3e3d":function(t,i,e){var n=e("c6de");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("6310a5e5",n,!0,{sourceMap:!1,shadowMode:!1})},"3f07":function(t,i,e){"use strict";var n;e.d(i,"b",(function(){return a})),e.d(i,"c",(function(){return o})),e.d(i,"a",(function(){return n}));var a=function(){var t=this,i=t.$createElement,n=t._self._c||i;return t.sw?n("v-uni-view",{style:"width:"+t.sw+"px;height:"+t.sh+"px;",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),function(){t.exit=!1}.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"flex-box justify-center flex-direction-column  align-item-center",style:"margin:0 auto;margin-top:20rpx;width:"+(t.cropW+6)+"px;height: "+(t.cropH+6)+"px;padding:3px;"},[n("v-uni-view",{staticClass:"flex-box justify-center box-sizing bg-white-main flex-direction-column align-item-center",style:"position:relative;width: 100%;height:100%;",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.chooseImg.apply(void 0,arguments)}}},[n("v-uni-image",{style:"position:absolute;width:100%;height:100%;",attrs:{src:e("d2da")}}),t.bgImgObj.path?t._e():n("v-uni-text",{staticClass:"text-main text-bold",staticStyle:{"font-size":"80rpx"}},[t._v("+")]),t.bgImgObj.path?t._e():n("v-uni-text",{staticClass:"margin-top-50 text-main text-32"},[t._v("上传图片")])],1)],1),t.bgImgObj.path?n("v-uni-view",{staticClass:"over-hidden",style:"position:absolute;left:"+(t.centerX-t.cropW/2+5)+"px;top:6px;width:"+t.cropW+"px;height:"+(t.cropH-8)+"px;",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),function(){t.exit=!0}.apply(void 0,arguments)}}},[n("v-uni-image",{staticClass:"position-absolute",class:t.bgImgObj.direction&&"rotatex",style:"transform: rotate("+t.bgImgObj.angle+"deg) "+(t.bgImgObj.direction?"matrix(-1,0,0,1,0,0);":"")+";left:"+(t.bgImgObj.x-t.centerX+t.cropW/2)+"px;top:"+(t.bgImgObj.y-t.centerY+t.cropH/2)+"px;opacity: 1;vertical-align:top;width:"+(t.bgImgObj.w-10)+"px;height:"+(t.bgImgObj.h-10)+"px;",attrs:{src:t.bgImgObj.path,mode:"scaleToFill"}})],1):t._e(),t.bgImgObj.path&&t.exit?n("v-uni-view",{staticClass:"po-fixd",style:"transform: rotate("+t.bgImgObj.angle+"deg);width:"+(t.bgImgObj.w+20)+"px;height: "+(t.bgImgObj.h+20)+"px;left:"+(t.bgImgObj.x-10)+"px;top:"+(t.bgImgObj.y-10)+"px",on:{touchstart:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.fStart.apply(void 0,arguments)},touchmove:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.fMove.apply(void 0,arguments)},touchend:function(i){arguments[0]=i=t.$handleEvent(i),t.fEnd.apply(void 0,arguments)}}}):t._e(),n("v-uni-view",{staticClass:"padding-small bg-black-white flex-box",style:"border-radius:20rpx;margin:0 auto;margin-top:80rpx;width:"+(t.sw-30)+"px;justify-content:space-around;"},[n("v-uni-view",{staticClass:"text-color-main text-align-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.chooseImg.apply(void 0,arguments)}}},[n("v-uni-view",[n("i",{staticClass:"iconfont icon-genghuan text-color-main"})]),t._v("更换头像")],1),n("v-uni-view",{staticClass:"text-color-main text-align-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.shunMove.apply(void 0,arguments)}}},[n("v-uni-view",[n("i",{staticClass:"iconfont icon-line-clockwiseshunshizhen-01 text-color-main"})]),t._v("顺时针")],1),n("v-uni-view",{staticClass:"text-color-main text-align-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.niMove.apply(void 0,arguments)}}},[n("v-uni-view",[n("i",{staticClass:"iconfont icon-line-clockwiseshunshizhen-01 text-color-main"})]),t._v("逆时针")],1),n("v-uni-view",{staticClass:"text-color-main text-align-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.scaleMove.apply(void 0,arguments)}}},[n("v-uni-view",[n("i",{staticClass:"iconfont icon-fangda-copy text-color-main"})]),t._v("放大")],1),n("v-uni-view",{staticClass:"text-color-main text-align-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.scaleLowMove.apply(void 0,arguments)}}},[n("v-uni-view",[n("i",{staticClass:"iconfont icon-suoxiao text-color-main"})]),t._v("缩小")],1),n("v-uni-view",{staticClass:"text-color-main text-align-center",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.scaleEnd.apply(void 0,arguments)}}},[n("v-uni-view",[n("i",{staticClass:"iconfont icon-huanyuan text-color-main"})]),t._v("还原")],1)],1),n("v-uni-view",{staticClass:"bg-main box-sizing text-align-center",style:"margin:0 auto;margin-top:160rpx;border-radius:20rpx;width:"+(t.sw-30)+"px;height:100rpx;line-height:100rpx;",on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.save.apply(void 0,arguments)}}},[n("v-uni-text",{staticClass:"text-28 text-white"},[t._v("完成")])],1),n("v-uni-canvas",{style:"width: "+t.phonew+"px; height: "+t.phoneh+"px;position: fixed;left:-3000px;top:0px",attrs:{"canvas-id":"firstCanvas",id:"firstCanvas"}}),n("v-uni-canvas",{style:"width: "+t.bgImgc+"px; height: "+t.bgImgc+"px;position: fixed;left:-3000px;top:0px",attrs:{"canvas-id":"bgImgc",id:"bgImgc"}}),n("v-uni-canvas",{style:"width: "+t.bgImgObj.initw/t.OUTP+"px; height: "+t.bgImgObj.inith/t.OUTP+"px;position: fixed;left:-3000px;top:0px",attrs:{"canvas-id":"left2right",id:"left2right"}})],1):t._e()},o=[]},4003:function(t,i,e){"use strict";var n=e("4ea4");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=n(e("9d1b")),o=n(e("f787")),c=(e("8f16"),e("cebd")),s={components:{uniNavBar:a.default,ourLoading:o.default},data:function(){return{faceUrl:null,width:window.screen.width,height:window.screen.width}},methods:{save:function(t){this.faceUrl=c.base64ToBlob(t,"image/png"),uni.navigateTo({url:"../discern/discern?faceUrl="+this.faceUrl})}},onBackPress:function(){return uni.switchTab({url:"../../mine/mine"}),!0}};i.default=s},"40c3":function(t,i,e){"use strict";e.r(i);var n=e("275b"),a=e("39db");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("eb96");var c,s=e("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"b2e4318a",null,!1,n["a"],c);i["default"]=r.exports},"6f17":function(t,i,e){"use strict";e.r(i);var n=e("9076"),a=e.n(n);for(var o in n)"default"!==o&&function(t){e.d(i,t,(function(){return n[t]}))}(o);i["default"]=a.a},7541:function(t,i,e){var n=e("dcf5");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=e("4f06").default;a("0c9cb958",n,!0,{sourceMap:!1,shadowMode:!1})},9076:function(t,i,e){"use strict";e("a9e3"),e("b680"),e("d3b7"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;uni.getSystemInfoSync();var n={data:function(){return{OUTP:.8,exit:!0,sw:"",sh:"",centerX:"",centerY:"",bgImgObj:{path:"",x:"",y:"",w:"",h:"",initX:"",initY:"",initw:"",inith:"",direction:!1,angle:0},sx:"",sy:"",mx:"",my:"",context:"",context2:"",context3:""}},props:{phonew:{type:Number,default:500},phoneh:{type:Number,default:500}},computed:{cropW:function(){return this.phonew*this.OUTP},cropH:function(){return this.phoneh*this.OUTP},bgImgc:function(){return 2*Math.sqrt(Math.pow(this.bgImgObj.w/(2*this.OUTP),2)+Math.pow(this.bgImgObj.h/(2*this.OUTP),2))},imgcenterX:function(){return this.bgImgObj.x+this.bgImgObj.w/2},imgcenterY:function(){return this.bgImgObj.y+this.bgImgObj.h/2}},created:function(){var t=uni.getSystemInfoSync();this.sw=t.windowWidth,this.sh=t.windowHeight-50,this.centerX=this.sw/2,this.centerY=this.sh/2},mounted:function(){this.context=uni.createCanvasContext("firstCanvas"),this.context2=uni.createCanvasContext("bgImgc"),this.context3=uni.createCanvasContext("left2right")},methods:{chooseImg:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album","camera"],success:function(i){t.bgImg=i.tempFilePaths[0];(i.tempFiles[0].size/1024/1024).toFixed(1);uni.getImageInfo({src:i.tempFilePaths[0],success:function(i){t.cropW*i.height/i.width<t.cropH?t.bgImgObj={path:i.path,initw:t.cropH*i.width/i.height,inith:t.cropH,w:t.cropH*i.width/i.height,h:t.cropH,x:t.centerX-t.cropH*i.width/i.height/2,y:t.centerY-t.cropH/2,initX:t.centerX-t.cropH*i.width/i.height/2,initY:t.centerY-t.cropH/2,direction:!1,angle:0}:t.cropW*i.height/i.width>t.cropH?t.bgImgObj={path:i.path,initw:t.cropW,inith:t.cropW*i.height/i.width,w:t.cropW,h:t.cropW*i.height/i.width,x:t.centerX-t.cropW/2,y:t.centerY-t.cropW*i.height/i.width/2,initX:t.centerX-t.cropW/2,initY:t.centerY-t.cropW*i.height/i.width/2,direction:!1,angle:0}:t.bgImgObj={path:i.path,initw:t.cropW,inith:t.cropW*i.height/i.width,w:t.cropW,h:t.cropW*i.height/i.width,x:t.centerX-t.cropW/2,y:t.centerY-t.cropH/2,initX:t.centerX-t.cropW/2,initY:t.centerY-t.cropH/2,direction:!1,angle:0}}})}})},fStart:function(t){this.sx=t.touches[0].pageX,this.sy=t.touches[0].pageY},scaleMove:function(t){this.bgImgObj.x=this.bgImgObj.x-20,this.bgImgObj.y=this.bgImgObj.y-20,this.bgImgObj.w=this.bgImgObj.w+40,this.bgImgObj.h=this.bgImgObj.h+40},scaleLowMove:function(t){this.bgImgObj.x=this.bgImgObj.x+20,this.bgImgObj.y=this.bgImgObj.y+20,this.bgImgObj.w=this.bgImgObj.w-40,this.bgImgObj.h=this.bgImgObj.h-40},shunMove:function(t){this.bgImgObj.angle+=90},niMove:function(t){this.bgImgObj.angle-=90},fMove:function(t){1==t.touches.length&&(this.mx=t.touches[0].pageX,this.my=t.touches[0].pageY,this.bgImgObj.x=this.bgImgObj.x+(this.mx-this.sx),this.bgImgObj.y=this.bgImgObj.y+(this.my-this.sy),this.sx=this.mx,this.sy=this.my)},fEnd:function(t){return this.bgImgObj.x>this.centerX-this.cropW/2||this.bgImgObj.y>this.centerY-this.cropH/2||this.bgImgObj.x+this.bgImgObj.w<this.centerX+this.cropW/2||this.bgImgObj.y+this.bgImgObj.h<this.centerY+this.cropH/2?(this.bgImgObj.x=this.centerX-this.bgImgObj.w/2,void(this.bgImgObj.y=this.centerY-this.bgImgObj.h/2)):void 0},scaleEnd:function(t){this.bgImgObj.x=this.bgImgObj.initX,this.bgImgObj.y=this.bgImgObj.initY,this.bgImgObj.w=this.bgImgObj.initw,this.bgImgObj.h=this.bgImgObj.inith,this.bgImgObj.angle=0},save:function(){var t=this;uni.showLoading({title:"请稍后",mask:!0}),this.bgImgObj.direction&&this.bgImgObj.angle?this.left2rightimg2(this.bgImgObj.path,this.bgImgObj.initw/this.OUTP,this.bgImgObj.initw/this.OUTP,this.bgImgObj.inith/this.OUTP).then((function(i){t.rotateAngle(i).then((function(i){t.scale(i).then((function(i){uni.hideLoading(),t.$emit("save",i)}))}))})):this.bgImgObj.direction?this.left2rightimg2(this.bgImgObj.path,this.bgImgObj.initw/this.OUTP,this.bgImgObj.initw/this.OUTP,this.bgImgObj.inith/this.OUTP).then((function(i){t.scale(i).then((function(i){uni.hideLoading(),t.$emit("save",i)}))})):this.bgImgObj.angle?this.rotateAngle(this.bgImgObj.path).then((function(i){t.scale(i).then((function(i){uni.hideLoading(),t.$emit("save",i)}))})):this.scale(this.bgImgObj.path).then((function(i){uni.hideLoading(),t.$emit("save",i)}))},left2rightimg2:function(t,i,e,n){var a=this;return new Promise((function(o,c){a.context3.save(),a.context3.translate((i- -1*e)/2,0),a.context3.scale(-1,1),a.context3.drawImage(t,0,0,e,n),a.context3.restore(),a.context3.draw(!1,(function(t){uni.canvasToTempFilePath({canvasId:"left2right",fileType:"png",quality:1,success:function(t){o(t.tempFilePath)}})}))}))},rotateAngle:function(t){var i=this;return new Promise((function(e,n){i.context2.save(),i.context2.translate(i.bgImgc/2,i.bgImgc/2),i.context2.rotate(i.bgImgObj.angle*Math.PI/180),i.context2.drawImage(t,-i.bgImgObj.w/(2*i.OUTP),-i.bgImgObj.h/(2*i.OUTP),i.bgImgObj.w/i.OUTP,i.bgImgObj.h/i.OUTP),i.context2.restore(),i.context2.draw(!1,(function(t){uni.canvasToTempFilePath({canvasId:"bgImgc",fileType:"png",quality:1,success:function(t){e(t.tempFilePath)}})}))}))},scale:function(t){var i=this;return new Promise((function(e,n){i.context.translate(0,0),i.bgImgObj.angle?i.context.drawImage(t,(i.bgImgObj.x-i.centerX+i.cropW/2)/i.OUTP-(i.bgImgc/2-i.bgImgObj.w/(2*i.OUTP)),(i.bgImgObj.y-i.centerY+i.cropH/2)/i.OUTP-(i.bgImgc/2-i.bgImgObj.h/(2*i.OUTP)),i.bgImgc,i.bgImgc):i.context.drawImage(t,(i.bgImgObj.x-i.centerX+i.cropW/2)/i.OUTP,(i.bgImgObj.y-i.centerY+i.cropH/2)/i.OUTP,i.bgImgObj.w/i.OUTP,i.bgImgObj.h/i.OUTP),i.context.draw(!1,(function(t){uni.canvasToTempFilePath({canvasId:"firstCanvas",destWidth:i.phonew,destHeight:i.phoneh,fileType:"png",quality:1,success:function(t){e(t.tempFilePath)}})}))}))}}};i.default=n},c6de:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.dropdown-item__selected[data-v-b2e4318a]{background:transparent;padding:0}uni-input[data-v-b2e4318a]{font-size:%?28?%}uni-checkbox .uni-checkbox-input[data-v-b2e4318a]{width:%?40?%!important;height:%?40?%!important}.container[data-v-b2e4318a]{background-color:#f1f1f1}.header[data-v-b2e4318a]{margin-top:%?100?%;height:%?350?%;position:relative}.avatar[data-v-b2e4318a]{position:absolute;width:%?500?%;height:%?350?%;left:%?120?%}.discern[data-v-b2e4318a]{position:absolute;width:%?500?%;height:%?350?%;left:%?120?%;z-index:999}.divider[data-v-b2e4318a]{height:%?1?%;background-color:#f2f2f2;margin-top:%?100?%}.tips[data-v-b2e4318a]{margin-top:%?50?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;align-items:center;font-size:%?24?%;color:#313131;margin-left:%?30?%}.loading[data-v-b2e4318a]{width:%?50?%;height:%?50?%;position:relative;left:%?200?%;top:%?163?%}',""]),t.exports=i},d2da:function(t,i,e){t.exports=e.p+"static/img/my_renlian_kuang@3x.056feef6.png"},d689:function(t,i,e){"use strict";e.r(i);var n=e("3f07"),a=e("6f17");for(var o in a)"default"!==o&&function(t){e.d(i,t,(function(){return a[t]}))}(o);e("dd10");var c,s=e("f0c5"),r=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"441cfe46",null,!1,n["a"],c);i["default"]=r.exports},dcf5:function(t,i,e){var n=e("24fb");i=n(!1),i.push([t.i,'.rotatex[data-v-441cfe46]{-webkit-transform:scaleX(-1);transform:scaleX(-1)}.flex-box[data-v-441cfe46]{display:-webkit-box;display:-webkit-flex;display:flex}.text-align-center[data-v-441cfe46]{text-align:center}.bg-black-op005[data-v-441cfe46]{background-color:rgba(0,0,0,.05)}.bg-black-white[data-v-441cfe46]{background-color:#fff}.justify-center[data-v-441cfe46]{-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.align-item-center[data-v-441cfe46]{-webkit-box-align:center;-webkit-align-items:center;align-items:center}.box-shadow-gray[data-v-441cfe46]{box-shadow:0 0 5px rgba(0,0,0,.3)}.flex-direction-column[data-v-441cfe46]{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.box-sizing[data-v-441cfe46]{box-sizing:border-box}.bg-white-main[data-v-441cfe46]{background-color:#fff}.margin-top-50[data-v-441cfe46]{margin-top:%?50?%}.po-fixd[data-v-441cfe46]{position:fixed}.over-hidden[data-v-441cfe46]{overflow:hidden}.position-absolute[data-v-441cfe46]{position:absolute}.w48h48[data-v-441cfe46]{width:%?48?%;height:%?48?%}.bg-main[data-v-441cfe46]{background-color:#0369d6}.radius50[data-v-441cfe46]{border-radius:50%}.text-24[data-v-441cfe46]{font-size:%?24?%}.text-white[data-v-441cfe46]{color:#fff}.text-28[data-v-441cfe46]{font-size:%?28?%}.text-30[data-v-441cfe46]{font-size:%?30?%}.text-20[data-v-441cfe46]{font-size:%?20?%}.triangle[data-v-441cfe46]{width:%?20?%;height:%?20?%;position:relative;overflow:hidden}.triangle[data-v-441cfe46]:before{content:"";position:absolute;width:%?20?%;height:%?20?%;top:0;right:%?-13?%;border-radius:%?5?%;background:#fa6044;-webkit-transform:rotate(45deg);transform:rotate(45deg)}.sbox-shadow[data-v-441cfe46]{box-shadow:-1px -1px 5px rgba(0,0,0,.6)}.bg-white-main[data-v-441cfe46]{background-color:#fff}.vw100[data-v-441cfe46]{width:100vw}.vw80[data-v-441cfe46]{width:80vw}.padding-small[data-v-441cfe46]{padding:%?10?%}.justify-around[data-v-441cfe46]{-webkit-justify-content:space-around;justify-content:space-around}.bg-main-lever2[data-v-441cfe46]{background-color:rgba(250,96,68,.08)}.radius80[data-v-441cfe46]{border-radius:%?80?%}.text-color-main[data-v-441cfe46]{color:#737373}',""]),t.exports=i},dd10:function(t,i,e){"use strict";var n=e("7541"),a=e.n(n);a.a},eb96:function(t,i,e){"use strict";var n=e("3e3d"),a=e.n(n);a.a}}]);