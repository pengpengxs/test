_jsload2&&_jsload2('panoramaflash', 'w.extend(Ma.prototype,{Ni:function(){for(var a=0;a<z.jr.length;a++)z.jr[a](this);this.Jf!=p&&this.dispatchEvent(new N("onvisible_poi_type_changed"),{visiblePOIType:this.Jf});this.Yk=this.eh();this.xr=this.dd=q;this.rq={};this.cd=new Yi(this);this.eS();this.NP();this.PP();if(this.Wa||this.Ib)this.Wa?this.pc(this.Wa,this.Ge):this.ra(this.Ib)},PP:function(){var a=this;setInterval(function(){if(a.Xb()){var b=a.eh();b.lb(a.Yk)||(a.cd.set("size",{width:b.width,height:b.height}),a.Yk=b,a.dispatchEvent(new N("size_changed")))}}, 80)},eS:function(){var a=this.cd,b=this;a.addEventListener("clicked_position",function(a){b.dispatchEvent(new N("onclicked_position"),a)});a.addEventListener("thumbnail_complete",function(){b.dispatchEvent(new N("onthumbnail_complete"))});a.addEventListener("indoor_enter",function(a){a.data.a3===p?b.Gk({haveBreakId:q}):b.Gk({haveBreakId:o});b.dispatchEvent(new N("onhaveBreakId_changed"))});a.addEventListener("first_thumb_complete",function(){var a,d;if(b.dd!==o){b.dd=o;a=this;b.Wa=a.get("id");"street"!= b.Ge&&(b.Ge="street",b.ky("inter"));b.Tn=a.get("links");d=a.get("position");b.Ib=d;d=a.get("pov");!b.Ba.heading&&!b.Ba.pitch?b.Ba=d:(d.heading!=b.Ba.heading||d.pitch!=b.Ba.pitch)&&a.set("pov",b.Ba);d=a.get("zoom");1==!b.Ic&&1!=d?b.Ic==d:b.Ic!=d&&a.set("zoom",b.Ic);d=p;for(var e in b.Fe)d=b.Fe[e],delete b.Fe[e],b.Ha(d);b.k.navigationControl===q&&a.set("navigationControlVisible",q);var f=function(b){a.ls("toggleUI",{topo:b.linksControl,wellLid:b.clickOnRoad,innerExit:q,innerFloor:b.indoorFloorControl})}; f(b.k);b.addEventListener("clickonroad_changed",function(){f(b.k)});b.addEventListener("links_visible_changed",function(){f(b.k)});b.addEventListener("onindoorfloor_options_changed",function(){f(b.k)});b.addEventListener("navigation_visible_changed",function(){a.set("navigationControlVisible",b.k.navigationControl)});if(0<b.Pg.length){e=0;for(d=b.Pg.length;e<d;e++)b.Pg[e].register(b.z,b,b.cd);var g="",i=[];e=0;for(d=b.mr.length;e<d;e++)g=b.mr[e].wM,i=b.mr[e].vM,b[g].apply(b,i)}b.k.visible?b.show(): b.R()}});a.addEventListener("pano_error",function(){b.dispatchEvent(new N("error"))});a.addEventListener("id_changed",function(a){if(b.dd||b.Wa==p||"inter"==b.Ge)b.Wa=a.data;b.dispatchEvent(new N("onid_changed"))});a.addEventListener("position_changed",function(a){b.dd?b.Ib=b.cd.get("position"):b.Ib==p&&(b.Ib=a.data);b.dispatchEvent(new N("onposition_changed"))});a.addEventListener("pov_changed",function(a){if(b.dd||b.Ba.heading==p)b.Ba=a.data;b.dispatchEvent(new N("onpov_changed"))});a.addEventListener("links_changed", function(a){if(b.dd||0==b.Tn.length)b.Tn=a.data;b.dispatchEvent(new N("onlinks_changed"))});a.addEventListener("zoom_changed",function(a){if(b.dd||b.Ic==p)b.Ic=a.data;b.dispatchEvent(new N("onzoom_changed"))});a.addEventListener("sdata_loaded",function(a){b.ky(a.data.panoType);b.dispatchEvent(new N("oncopyright_changed"),{copyright:a.data.copyright});if(b.xr){for(var d in b.rq)b[d](b.rq[d]);b.xr=q;b.rq={}}});a.addEventListener("overlay_mouseclick",function(a){a=b.Fe[a.data.markerId];a.dispatchEvent(new N("onclick"), {type:"click",target:a})});a.addEventListener("overlay_mouseover",function(a){a=b.Fe[a.data.markerId];a.dispatchEvent(new N("onmouseover"),{type:"mouseover",target:a})});a.addEventListener("overlay_mouseout",function(a){a=b.Fe[a.data.markerId];a.dispatchEvent(new N("onmouseout"),{type:"mouseout",target:a})})},NP:function(){var a=this;w.K(this.z,ha.ca.kf?"DOMMouseScroll":"onmousewheel",function(b){if(a.k.enableScrollWheelZoom&&a.k.visible){var c=-b.detail/3||b.wheelDelta/120,c=a.ea()+c;a.Lc(c);zb(b)}})}, pc:function(a,b,c){"object"===typeof b&&(c=b,b=j);if(!this.dd||a&&a!=this.Wa)this.dd||(this.Wa=a,this.Ge=b||"street",this.Ib=p),this.cd.set("id",{id:a,type:b||"street"}),this.xr=o,c&&c.pov&&this.Kc(c.pov)},ra:function(a){if(!this.dd||a&&!this.Ib.lb(a))this.dd||(this.Ib=a,this.Wa=p),this.cd.set("position",a),this.xr=o},Kc:function(a){a&&(90<a.pitch&&(a.pitch=90),-90>a.pitch&&(a.pitch=-90),this.dd?this.xr?this.rq.setPov=a:this.cd.set("pov",a):this.Ba=a)},Lc:function(a){a!=this.Ic&&(a>Hd&&(a=Hd),a<Id&& (a=Id),this.dd?this.cd.set("zoom",a):this.Ic=a,this.rq.setZoom=a)},show:function(){this.k.visible=o;this.wf&&(this.B&&this.B.La()===this.z)&&w.C.show(this.wf);this.cd&&this.cd.ir&&(this.cd.ir.style.left="0");this.dd&&(this.kl===this.Xb()&&this.cd.set("id",{id:this.kl,type:this.tS||"street"}),this.dispatchEvent(new N("onvisible_changed")))},R:function(){this.k.visible=q;this.dd&&(this.kl=this.Wa,this.tS=this.Ge,this.cd.ls("closePano"));this.Wa=p;this.cd&&this.cd.ir&&(this.cd.ir.style.left="-9999px"); this.dispatchEvent(new N("onvisible_changed"))},CB:function(a){function b(a,b){return function(){a.mr.push({wM:b,vM:arguments})}}if(this.dd)a.register(this.z,this,this.cd);else for(var c=a.getPanoMethodList(),d="",e=0,f=c.length;e<f;e++)d=c[e],this[d]=b(this,d);this.Pg.push(a)},OE:function(a){this.dd&&a.dispose();for(var b=this.Pg.length;b--;)this.Pg[b]===a&&this.Pg.splice(b,1)},Ht:function(a){this.Jf=a||"none";this.dispatchEvent(new N("onvisible_poi_type_changed"),{visiblePOIType:this.Jf})},Ha:function(a){this.Fe[a.ed]= a;this.dd&&this.dispatchEvent(new N("onadd_overlay"),{overlay:a})},Rb:function(a){var b=a.ed;this.dd&&this.dispatchEvent(new N("onremove_overlay"),{overlay:a});delete this.Fe[b]},Jo:function(){var a=this.cd.get("indoorData");a&&a.pid&&this.pc(a.pid)},dF:function(a){this.cd.set("interactiveState",a)}});hi=Ma.prototype; T(hi,{setId:hi.pc,setPosition:hi.ra,setPov:hi.Kc,setZoom:hi.Lc,show:hi.show,hide:hi.R,addPlugin:hi.CB,removePlugin:hi.OE,addOverlay:hi.Ha,removeOverlay:hi.Rb,setPanoramaPOIType:hi.Ht,exitInter:hi.Jo,setInteractiveState:hi.dF});function Zi(){this.QS=(this.cA=window.ActiveXObject&&!(window.opera&&!window.opera.nodeType))?\' classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"\':\' type="application/x-shockwave-flash"\';this.cI=["id","width","height","align","data"];this.dI="wmode movie flashvars scale quality play loop menu salign bgcolor base allowscriptaccess allownetworking allowfullscreen seamlesstabbing devicefont swliveconnect".split(" ")} w.extend(Zi.prototype,{create:function(a,b){var c=this.lR(a);b&&"string"===typeof b&&(b=document.getElementById(b));b?b.innerHTML=c:document.write(c)},remove:function(a){if((a=this.lL(a))&&this.cA){a.style.display="none";for(var b in a)"function"===typeof a[b]&&(a[b]=p);window.NO&&setTimeout(window.NO,0)}a.parentNode.removeChild(a)},JW:function(){function a(){var c=function(){var a=navigator;if(a.plugins&&a.mimeTypes.length){if((a=a.plugins["Shockwave Flash"])&&a.description)return a.description.replace(/([a-zA-Z]|\\s)+/, "").replace(/(\\s)+r/,".")+".0"}else if(b.cA)try{var c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(c)return c.GetVariable("$version").replace(/WIN/g,"").replace(/,/g,".")}catch(f){}}();a=function(){return c};return c}var b=this;return a()},lL:function(a){return document.getElementById(a)},LG:function(a,b){for(var a=a.split("."),b=b.split("."),c=Math.max(a.length,b.length),d=0;d<c;d++){var e=a[d],f=b[d];if(!e||!f)return!e&&!f?0:e?1:-1;e=Number(e);f=Number(f);if(e<f)return-1;if(e>f)return 1}return 0}, lR:function(a){a=a||{};a.movie=a.url||"";a.altHtml=a.errorMessage||"";if(a.vars){var b=a.vars,c=[],d=p,e=p;for(d in b)e=b[d],c.push(d+"="+encodeURIComponent(e));a.flashvars=c.join("&")}a.minVer=a.ver;b=a.minVer;c=a.maxVer;if(b||c)if(d=this.JW(),!d||b&&0>this.LG(d,b)||c&&0<this.LG(d,c))return a.altHtml||"";d=["<object",this.QS];a.data=a.movie;for(b=0;b<this.cI.length;b++)c=this.cI[b],a.hasOwnProperty(c)&&d.push(" ",c,\'="\',a[c],\'"\');d.push(">");for(b=0;b<this.dI.length;b++)c=this.dI[b],a.hasOwnProperty(c)&& d.push(\'<param name="\',c,\'" value="\',a[c],\'"/>\');d.push("</object>");return d.join("")}});function $i(a,b){this.M=a;this.iR=b;this.Ph={};this.fz()}w.extend($i.prototype,{fz:function(){var a=this,b=a.M;b.addEventListener("add_overlay",function(b){b=b.overlay;b.pa(a.M,a.iR);a.Ph[b.ed]=b});b.addEventListener("remove_overlay",function(b){b=b.overlay;b.remove();delete a.Ph[b.ed]})}});w.extend(Ld.prototype,{pa:function(a,b){this.M=a;this.ga()||this.ra(this.M.ga());this.ya=b;this.vb()},vb:function(){var a=this.ga(),a=bc.Qd.lh(a),a={markerId:this.ed,catalog:"FD01",name:this.pk(),rank:this.Mo(),x:a.x,y:a.y,color:this.sm(),hoverColor:this.yL,backgroundHoverColor:this.EJ,borderColor:this.borderColor,borderHoverColor:this.IJ,backgroundColor:this.backgroundColor,padding:this.padding,fontSize:this.fontSize,borderWidth:this.borderWidth};if(this.TD||this.getImageData())a.imageUrl=this.TD, a.imageData=this.getImageData(),a.size=this.xb(),a.image=this.Ww(),a.catalog="FD02",this.xb()&&(a.width=this.xb()[0],a.height=this.xb()[1]);this.ya.nN(a)},hide:function(){this.Oa=q;this.ya&&this.ya.zo(this.ed,"visible",q)},show:function(){this.Oa=o;this.ya&&this.ya.zo(this.ed,"visible",o)},isVisible:t("Oa"),If:function(a,b){this.ya&&("position"==a&&(b=bc.Qd.lh(b),b={lng:b.x,lat:b.y}),this.ya.zo(this.ed,a,b))},remove:function(){this.dispatchEvent(new N("onremove"),{type:"remove",target:this});this.ya.jK([this.ed])}});var aj={none:"",transit:"FE0A",hotel:"FE02",catering:"FE01",movie:"FE06",indoor_scene:"FEFE"},bj={none:["-1",""],transit:["0","m_transit.png"],hotel:["1","m_hotel.png"],catering:["2","m_catering.png"],movie:["3","m_movie.png"],transit:["4","m_transit.png"],indoor_scene:["5","m_indoor_scene.png"]}; w.extend(Od.prototype,{pa:function(a,b){this.M=a;this.ya=b;this.vb()},vb:function(){var a=this.ga(),a=bc.Qd.lh(a),b=this.ER(),c=this.DD();this.ya.nN({markerId:this.ed,catalog:b,name:this.Xo(),rank:this.Mo(),x:a.x,y:a.y,heading:c.heading,pitch:c.pitch,pid:c.panoId,panoIId:c.panoIId})},ER:function(){var a=this.Po().match(/.*\\/(.*)/)[1],b;for(b in bj)if(bj[b][1]==a)return aj[b]},hide:function(){this.Oa=q;this.ya.zo(this.ed,"visible",q)},show:function(){this.Oa=o;this.ya.zo(this.ed,"visible",o)},isVisible:t("Oa"), If:function(a,b){"position"==a&&(b=bc.Qd.lh(b),b={lng:b.x,lat:b.y});this.ya.zo(this.ed,a,b)},remove:function(){this.dispatchEvent(new N("onremove"),{type:"remove",target:this});this.ya.jK([this.ed])}});Yi.Zn=new bc(p,{Of:"api"});function Yi(a){w.lang.Aa.call(this);a&&(this.M=a,this.Ig=p,this.ZG=a.z.clientWidth,this.YG=a.z.clientHeight,new $i(a,this))}Yi.lP=z.sg("pano");w.lang.sa(Yi,w.lang.Aa,"PanoramaFlashWraper"); w.extend(Yi.prototype,{nN:function(a){this.ls("addMarkers",[a])},jK:function(a){this.ls("removeMarkers",[a])},zo:function(a,b,c){var d={};d.markerId=a;d[b]=c;this.set("markerProperty",d)},get:function(a){var b=p;"position"==a?(b=this.Ig.get("mercatorPosition"),b=bc.Qd.ti(new P(b.mercatorX,b.mercatorY))):b=this.Ig.get(a);return b},set:function(a,b){var c=this;"position"==a?Yi.Zn.nj(b,function(a){a&&a.id?c.M.pc(a.id):c.dispatchEvent(new N("pano_error"))}):"id"==a?c.Ig==p?c.lS(c.M):c.Ig.set&&c.Ig.set("panoOptions", {id:b.id,panoType:b.type,width:c.ZG,height:c.YG}):c.Ig&&c.Ig.set&&c.Ig.set(a,b)},ls:function(a,b){return this.Ig.doAction(a,b)},R1:t("ir"),lS:function(a){var b=this,c=a.k.swfSrc.match(/.*\\//)[0]+"BDStreetScape.swf";b.Ig=o;Yi.Zn.ix(function(d){var e="",f="";"inter"===a.Ge?f=a.Wa:e=a.Wa;e={pid:e,iid:f,panoType:a.Ge,heading:a.Ba.heading,pitch:a.Ba.pitch,width:b.ZG,height:b.YG,panoUrl:c,panoTileUrl:Yi.lP.join("|"),domain:bc.tu,jsInterfaceNamespace:"BMap.PanoramaFlashInterface",swfIndex:b.aa};f=a.k.swfSrc; d&&(d.panoUdt&&d.panoUdt.version&&e)&&(e.udtVersion=d.panoUdt.version);d&&(d.panoSwfAPI&&d.panoSwfAPI.version&&e)&&(e.panoUrl=e.panoUrl+"?version="+d.panoSwfAPI.version,f=f+"?version="+d.panoSwfAPI.version);b.Ig=b.AQ(a.z,e,f)})},AQ:function(a,b,c){var d=new Zi,e="PanoramaFlash"+this.aa,f=p,f=L("div");f.style.position="absolute";f.id="PanoramaFlashWraper"+this.aa;f.style.top="0";f.style.left="0";f.style.height="100%";f.style.width="100%";f.style.zIndex=1200;this.ir=f;a.appendChild(f);d.create({id:e, width:"100%",height:"100%",allowscriptaccess:"always",scale:"showall",wmode:"opaque",quality:"best",url:c,ver:"10.2",errorMessage:"\\u60a8\\u672a\\u5b89\\u88c5Flash Player\\u64ad\\u653e\\u5668\\u6216\\u8005\\u7248\\u672c\\u8fc7\\u4f4e",vars:b},f);return d.lL(e)}});var cj=Yi.prototype;T(cj,{get:cj.get,set:cj.set,doAction:cj.ls}); ');
