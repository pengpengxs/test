_jsload2&&_jsload2('pointcollection', 'w.extend(wc.prototype,{pa:function(a){var b=this;b.map=this.B=a;b.uc=document.createElement("canvas");b.uc.style.cssText="position: absolute; left: 0; top: 0;";b.U=b.uc;a=b.map.xb();b.uc.width=a.width;b.uc.height=a.height;b.uc.id="myCanvasElement";b.map.Qf().gt.appendChild(b.uc);b.my=new Hf;b.fi();b.map.addEventListener("click",function(a){a=If(b.my,a.offsetX,a.offsetY);a!==p&&b.dispatchEvent("click",{point:a.point})});b.Jk=p;b.map.addEventListener("mousemove",function(a){for(var d=b.map.gx(),e=d.length, f=p,g=0;g<e&&!(d[g]instanceof z.PointCollection&&(f=If(d[g].my,a.offsetX,a.offsetY),f!==p));g++);f===p?(b.Jk!==p&&(b.dispatchEvent("mouseout",{point:b.Jk.point}),b.Jk=p),b.uc.style.cursor=""):(b.Jk===p?(b.dispatchEvent("mouseover",{point:f.point}),b.Jk=f):b.Jk!==f&&(b.dispatchEvent("mouseout",{point:b.Jk.point}),b.dispatchEvent("mouseover",{point:f.point}),b.Jk=f),b.uc.style.cursor="pointer")});return b.uc},fi:function(){this.my.data.kF=[];var a=this.map.xb();this.uc.width=a.width;this.uc.height= a.height;this.uc.style.left=this.map.se.style.left;this.uc.style.top=this.map.se.style.top;if(this.da.ha&&this.da.ha.length){this.uc.getContext("2d").clearRect(0,0,this.uc.width,this.uc.height);-1!==document.location.href.indexOf(".local")&&(console&&console.time)&&console.time("\\u904d\\u5386\\u7ed8\\u5236\\u9ebb\\u70b9");this.uc.getContext("2d").beginPath();for(var b=0,c;c=this.da.ha[b];b++){var d=this.map.$b(c);if(!(0>d.x||0>d.y||d.x>a.width||d.y>a.height)){var e;switch(this.w.shape){case 1:e=new Jf; break;case 2:e=new Kf;break;case 4:e=new Lf;break;case 5:e=new Mf;break;case tc:e=new Nf;break;default:e=new Nf}switch(this.w.size){case 1:("circle"===e.type||"star"===e.type)&&e.rf(1);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(2),e.yh(2);break;case 2:("circle"===e.type||"star"===e.type)&&e.rf(2);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(4),e.yh(4);break;case 3:("circle"===e.type||"star"===e.type)&&e.rf(4);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(8),e.yh(8);break;case uc:("circle"=== e.type||"star"===e.type)&&e.rf(5);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(10),e.yh(10);break;case 5:("circle"===e.type||"star"===e.type)&&e.rf(8);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(16),e.yh(16);break;case 6:("circle"===e.type||"star"===e.type)&&e.rf(10);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(20),e.yh(20);break;case 7:("circle"===e.type||"star"===e.type)&&e.rf(15);if("rectangle"===e.type||"rhombus"===e.type)e.Ah(30),e.yh(30);break;default:if(("circle"===e.type||"star"=== e.type)&&e.rf(5),"rectangle"===e.type||"rhombus"===e.type)e.Ah(10),e.yh(10)}this.w.color&&("circle"===e.type||"star"===e.type||"rectangle"===e.type||"rhombus"===e.type)&&e.Fk(this.w.color);e.Eo(this.uc.getContext("2d"),d.x,d.y);e.point=c;this.my.data.kF.push(e)}}this.uc.getContext("2d").fillStyle=this.w.color;this.uc.getContext("2d").fill();-1!==document.location.href.indexOf(".local")&&(console&&console.timeEnd)&&console.timeEnd("\\u904d\\u5386\\u7ed8\\u5236\\u9ebb\\u70b9")}},HZ:function(a){this.da.ha= a;this.fi()},vi:function(a){a.color&&(this.w.color=a.color);a.size&&(this.w.size=a.size);a.shape&&(this.w.shape=a.shape);this.fi()},clear:function(){this.da.ha=[];this.fi()},remove:function(){this.clear();this.uc&&this.uc.parentNode&&this.uc.parentNode.removeChild(this.uc);this.dispatchEvent(new N("onremove"))}});wc.prototype.initialize=wc.prototype.pa;wc.prototype.draw=wc.prototype.fi;wc.prototype.setPoints=wc.prototype.HZ;wc.prototype.setStyles=wc.prototype.vi;wc.prototype.clear=wc.prototype.clear; wc.prototype.remove=wc.prototype.remove;function Hf(){this.data={kF:[]}}function If(a,b,c){for(var d=0,e;e=a.data.kF[d];d++)if(e.qk(),b>e.position.x-e.$o()/2&&b<e.position.x+e.$o()/2&&c>e.position.y-e.qk()/2&&c<e.position.y+e.qk()/2)return e;return p}function Kf(){this.type="waterdrop";this.position={x:0,y:0}}var Of=document.createElement("img"),Pf=q;Of.onload=function(){Pf=o};Of.src=z.la+"images/point-collection/red-marker-10x13.png";var Qf=document.createElement("img");Qf.onload=s(); Qf.src=z.la+"images/point-collection/blue-marke-15x16.png";Kf.prototype.Eo=function(a,b,c){var d=this;Pf===q?setTimeout(function(){d.Eo(a,b,c)},10):(d.c1=a,d.position.x=b,d.position.y=c,a.save(),a.translate(b-Of.width/2,c-Of.height/2),a.drawImage(Of,0,0,Of.width,Of.height,0,0,Of.width,Of.height),a.restore())};Kf.prototype.ga=t("position");Kf.prototype.$o=function(){return Of.width};Kf.prototype.qk=function(){return Of.height}; function Nf(a){this.type="circle";a=a||{};this.D={va:a.radius||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Nf.prototype;da.Eo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.translate(b,c);a.beginPath();a.fillStyle=this.D.color;a.arc(0,0,this.D.va,0,2*Math.PI,q);a.fill();a.restore()};da.rf=function(a){this.D.va=a};da.eL=function(){return this.D.va};da.Fk=function(a){this.D.color=a};da.ga=t("position");da.$o=function(){return 2*this.D.va};da.qk=function(){return 2*this.D.va}; function Jf(a){this.type="star";a=a||{};this.D={va:a.radius||10,GE:a.pointsNumber||5,nW:a.fraction||0.4,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Jf.prototype;da.Eo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.fillStyle=this.D.color;a.beginPath();a.translate(b,c);a.moveTo(0,0-this.D.va);for(b=0;b<this.D.GE;b++)a.rotate(Math.PI/this.D.GE),a.lineTo(0,0-this.D.va*this.D.nW),a.rotate(Math.PI/this.D.GE),a.lineTo(0,0-this.D.va);a.fill();a.restore()}; da.rf=function(a){this.D.va=a};da.Fk=function(a){this.D.color=a};da.ga=t("position");da.$o=function(){return 2*this.D.va};da.qk=function(){return 2*this.D.va};function Lf(a){this.type="rectangle";a=a||{};this.D={width:a.width||10,height:a.height||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Lf.prototype;da.Eo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.translate(b-this.D.width/2,c-this.D.height/2);a.fillStyle=this.D.color;a.fillRect(0,0,this.D.width,this.D.height);a.restore()}; da.Ah=function(a){this.D.width=a};da.$o=function(){return this.D.width};da.yh=function(a){this.D.height=a};da.qk=function(){return this.D.height};da.Fk=function(a){this.D.color=a};da.ga=t("position");function Mf(a){this.type="rhombus";a=a||{};this.D={width:a.width||10,height:a.height||10,color:a.color||"#fa937e"};this.position={x:0,y:0}}da=Mf.prototype; da.Eo=function(a,b,c){this.position.x=b;this.position.y=c;a.save();a.fillStyle=this.D.color;a.translate(b-this.D.width/2,c-this.D.height/2);a.beginPath();a.moveTo(0+0.5*this.D.width,0);a.lineTo(0,0+0.5*this.D.height);a.lineTo(0+0.5*this.D.width,0+this.D.height);a.lineTo(0+this.D.width,0+0.5*this.D.height);a.lineTo(0+0.5*this.D.width,0);a.closePath();a.fill();a.restore()};da.Ah=function(a){this.D.width=a};da.$o=function(){return this.D.width};da.yh=function(a){this.D.height=a};da.qk=function(){return this.D.height}; da.Fk=function(a){this.D.color=a};da.ga=t("position"); ');
