(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-teacher-myclass-classdetail-scoredetail"],{"033d":function(t,e,i){"use strict";i.r(e);var a=i("d481"),s=i("c734");for(var n in s)"default"!==n&&function(t){i.d(e,t,(function(){return s[t]}))}(n);i("385f");var r,o=i("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"2c47438e",null,!1,a["a"],r);e["default"]=c.exports},"058d":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={data:function(){return{id:null,current:0,keywords:"",currentStu:null,sortOrder:-1,totalscore:0,titles:[],stuList:[],pictureList:[],photoUrl:this.$util.commonUrl()+this.$api.linkloadUrl}},onLoad:function(t){this.id=t.id,uni.setNavigationBarTitle({title:t.taskName}),this.getStuList()},methods:{getStuList:function(){var t=this,e=""==this.keywords?{taskId:this.id,sort:this.sortOrder}:{taskId:this.id,queryParam:this.keywords,sort:this.sortOrder};this.$util.request(this.$api.teacherStuScore,e,"POST").then((function(e){t.stuList=e.datas;var i=JSON.parse(JSON.stringify(e.datas.titles));if(e.datas.vos[0]){var a=e.datas,s=JSON.parse(JSON.stringify(a.vos[t.current]));t.maxIndex=a.vos.length-1,t.currentStu=s;for(var n=0;n<i.length;n++)for(var r=0;r<s.taskExamScores.length;r++)i[n].id==s.taskExamScores[r].taskExamId&&(i[n].stuScore=s.taskExamScores[r].taskExamScore);t.titles=i}else t.stuList=[],t.currentStu=null}))},sort:function(){this.stuList=[],this.sortOrder=1==this.sortOrder?-1:1,this.getStuList()},changeKeyword:function(t){this.keywords=t.target.value},changeCurrent:function(t,e){this.current=e,this.currentStu=t},changeScore:function(t,e,i){this.titles;this.titles[e].stuScore=t.detail.value,this.currentStu.taskExamScores[i].taskExamScore=t.detail.value},changeTotalScore:function(t){this.totalscore=t.detail.value},onBack:function(){return uni.navigateBack(),!0},previewImg:function(t){var e=[];e[0]=t,uni.previewImage({current:0,urls:e})},takePhoto:function(){var t=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["camera","album"],success:function(e){if("chooseImage:ok"===e.errMsg){var i=e.tempFilePaths[0];t.$util.uploadFile(t.$api.uploadUrl,i).then((function(e){200===e.status&&t.pictureList.push({id:e.datas.id,fileOriginalName:e.datas.fileOriginalName,url:t.$util.commonUrl()+t.$api.linkloadUrl+e.datas.moduleName+"/"+e.datas.fileNewName,uploadType:1})}))}}})},save:function(){for(var t=this,e=this.currentStu.taskExamScores?this.currentStu.taskExamScores:[],i=[],a=[],s=0;s<e.length;s++){var n={id:e[s].taskExamId,score:e[s].taskExamScore};i.push(n)}for(var r=0;r<this.pictureList.length;r++)a.push({sourceId:this.pictureList[r].id,uploadType:this.pictureList[r].uploadType});var o={scoringParam:{stuScoreList:[{examParams:i,score:this.totalscore,studentId:this.currentStu.id}],taskId:this.id},sources:a};this.$util.request(this.$api.teacherSaveScore,o,"POST").then((function(e){200==e.status&&(uni.showToast({title:e.message,duration:1e3}),t.pictureList=[],t.getStuList(),t.current<t.maxIndex&&(t.current=t.current+1))}))}}};e.default=a},"385f":function(t,e,i){"use strict";var a=i("c345"),s=i.n(a);s.a},"4d9b":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB0klEQVRYR+2XoU4DQRCGZ5umDtKAI2lSDGZnG8oT8BIIMIDAUIEBQ0LagkCAIgQMoiAg6TsQFLridqk4QQ22lorrDdmGSy7HHXvXbNOScHZn9//un9mZLIMpf2zK+jC7AJ1Op5zP53fSOJTL5dqc87c0sdGYRAeUUh9EtJTh0C1EfMoQPwpNBJBSUtbDAGAbER+y7DMCEFFTCNGIO9RxnAZjrB5Z20PEu7QQkwAAItoXQtymgbAJcAIAZ4EoY+yAc35lgrAGgIhMKXVIRBeBKBEdCSEuf4OwCqCFpJQ1ALgOOXHMOT9PgrAGoIs1LBIpzjoinsZBWAMw5LqPiIvWAXS3LBQKr2kalq4R6wCmCg/3iX+Av+sAY6zBOW8qpVaJ6BkAFiK5byHirmlWjO1AACClfASAzRihxCtmtQi73e7KcDjUbXUuDOH7/n2lUmlNzIHwOHYcZ9109TzP61Wr1Z6OU0rViWg0ysdOQQAgpWwDwIYJQK/7vr+rXbGSglANvACA0YFvwBoi3lgBCBxwXXd+MBispXCgXywW3VKp9GkVIIXwjxArAOMIx+0ZpwjfAaBsCaCHiMuZpmGWh4kJ0vO8VnA1o7Gz+zQz/ZWt9ak78AW7jWMwz/P4XAAAAABJRU5ErkJggg=="},"9b02":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".wrap[data-v-2c47438e]{font-size:%?26?%;padding:%?0?%;height:100%;margin:%?20?%;background-color:initial}.main[data-v-2c47438e]{padding:%?20?%;border-radius:%?10?%;background-color:#fff}.current[data-v-2c47438e]{background-color:#0369d6;color:#fff}.top[data-v-2c47438e]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?20?%;margin-bottom:%?20?%;background-color:#fff}.top .btn-search[data-v-2c47438e]{background-color:#0369d6;color:#fff;margin-left:%?10?%;width:%?150?%;text-align:center;border-radius:%?10?%;height:%?60?%;line-height:%?60?%}.top uni-input[data-v-2c47438e]{border:1px solid #f2f2f2;padding:%?6?%;margin:0;width:73%;border-radius:%?10?%;background-color:#f8f8f8}.image-little[data-v-2c47438e]{width:%?40?%;height:%?40?%;margin:0 %?10?%}.examScores[data-v-2c47438e]{display:-webkit-box;display:-webkit-flex;display:flex}[data-v-2c47438e] .list uni-input{margin:%?10?% 0}[data-v-2c47438e] .uni-input-input,[data-v-2c47438e] .uni-input-placeholder{font-size:%?26?%;padding:%?5?%}.itemtable[data-v-2c47438e]{background-color:#fff;border-bottom:1px solid #f4f4f4;max-height:%?500?%;overflow:auto}\n/* 表格 */.table01[data-v-2c47438e]{display:table;width:100%;background:#fff;margin:0 auto}.filter[data-v-2c47438e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;-webkit-box-align:center;-webkit-align-items:center;align-items:center;margin-right:%?30?%;position:relative}.filter .iconfont[data-v-2c47438e]{color:#333;padding-left:%?10?%;font-size:%?28?%}.filter .txt[data-v-2c47438e]{font-size:%?24?%;color:#fff;padding-right:%?28?%}.filter .icon[data-v-2c47438e]{width:%?20?%;height:%?20?%;background-color:#cbcbcb}.arrow_up[data-v-2c47438e]{position:absolute;top:%?10?%;right:%?20?%}.arrow_down[data-v-2c47438e]{position:absolute;top:%?26?%;right:%?20?%}.th01[data-v-2c47438e]{display:table-row;background-color:#f2f2f2}.tr01[data-v-2c47438e]{display:table-row}.th01 .td01[data-v-2c47438e]{width:33.33%;display:table-cell;text-align:center;height:%?60?%;border:1px solid #ebebeb;font-size:%?24?%;padding:0 %?16?%;vertical-align:middle}.tr01 .td01[data-v-2c47438e]{display:table-cell;text-align:center;height:%?60?%;border-bottom:1px solid #ebebeb;border-right:1px solid #ebebeb;font-size:%?28?%;padding:0 %?16?%;vertical-align:middle;width:33.33%}.tr01 .td01[data-v-2c47438e]:first-child{border-left:1px solid #ebebeb}.tr01 .td01 uni-image[data-v-2c47438e]{width:%?40?%;height:%?40?%;vertical-align:middle}.stuInfo .list[data-v-2c47438e]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?50?%;line-height:%?50?%}.stuInfo .list-item[data-v-2c47438e]{display:inline-block}.stuInfo-tit[data-v-2c47438e]{min-width:%?250?%;text-align:right;padding-right:%?20?%}.stuInfo[data-v-2c47438e]{padding-top:%?30?%}.item-btn[data-v-2c47438e]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly;background-color:#fff;padding-top:%?70?%;padding-bottom:%?15?%}.btn[data-v-2c47438e]{width:%?250?%;height:%?60?%;line-height:%?60?%;color:#0369d6;background-color:#fff;border:1px solid #0369d6;border-radius:%?10?%;text-align:center}.save[data-v-2c47438e]{background-color:#0369d6;border:none;color:#fff}",""]),t.exports=e},c345:function(t,e,i){var a=i("9b02");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("aacce60a",a,!0,{sourceMap:!1,shadowMode:!1})},c734:function(t,e,i){"use strict";i.r(e);var a=i("058d"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,(function(){return a[t]}))}(n);e["default"]=s.a},d481:function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return s})),i.d(e,"c",(function(){return n})),i.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"wrap"},[a("v-uni-view",{staticClass:"top"},[a("v-uni-input",{attrs:{type:"text",placeholder:"搜索姓名/学号",value:t.keywords},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.changeKeyword.apply(void 0,arguments)}}}),a("v-uni-text",{staticClass:"btn-search",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getStuList()}}},[t._v("搜索")])],1),a("v-uni-view",{staticClass:"main"},[a("v-uni-view",{staticClass:"table01"},[a("v-uni-view",{staticClass:"th01"},[a("v-uni-view",{staticClass:"td01 f-15"},[t._v("姓名")]),a("v-uni-view",{staticClass:"td01 f-15"},[t._v("学号")]),a("v-uni-view",{staticClass:"td01 filter f-15"},[a("v-uni-view",[t._v("总分"),a("i",{staticClass:"iconfont icon-paixu"})])],1)],1)],1),a("v-uni-view",{staticClass:"itemtable"},[a("v-uni-view",{staticClass:"table01"},t._l(t.stuList.vos,(function(e,i){return a("v-uni-view",{key:e.id,staticClass:"tr01",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.changeCurrent(e,i)}}},[a("v-uni-view",{staticClass:"td01",class:{current:i==t.current}},[t._v(t._s(e.name))]),a("v-uni-view",{staticClass:"td01",class:{current:i==t.current}},[t._v(t._s(e.number))]),a("v-uni-view",{staticClass:"td01",class:{current:i==t.current}},[t._v(t._s(e.score?e.score:"-"))])],1)})),1)],1),t.currentStu?a("v-uni-view",{staticClass:"stuInfo"},[a("v-uni-view",{staticClass:"list"},[a("v-uni-text",{staticClass:"stuInfo-tit"},[t._v("当前学生：")]),a("v-uni-text",[t._v(t._s(t.currentStu.name))]),t._l(t.currentStu.stuTasks,(function(e){return a("v-uni-view",{key:e.fileNewName},[1==e.fileType?[a("v-uni-image",{staticClass:"image-little",attrs:{src:t.photoUrl+e.moduleName+"/"+e.fileNewName},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImg(t.photoUrl+e.moduleName+"/"+e.fileNewName)}}})]:t._e(),2==e.fileType?[a("v-uni-image",{staticClass:"image-little",attrs:{src:i("4d9b")}})]:t._e()],2)})),t.currentStu.teaTasks||t.currentStu.stuTasks?a("v-uni-view",[t._v("|")]):t._e(),a("v-uni-view",[t._l(t.currentStu.teaTasks,(function(e){return a("v-uni-image",{key:e.fileNewName,staticClass:"image-little",attrs:{src:t.photoUrl+e.moduleName+"/"+e.fileNewName},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImg(t.photoUrl+e.moduleName+"/"+e.fileNewName)}}})})),t._l(t.pictureList,(function(e){return a("v-uni-image",{key:e.url,staticClass:"image-little",attrs:{src:e.url},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.previewImg(e.url)}}})}))],2)],2),t.titles?a("v-uni-view",{staticClass:"list list-item"},t._l(t.titles,(function(e,i){return a("v-uni-view",{key:e.id,staticClass:"examScores"},[a("v-uni-text",{staticClass:"stuInfo-tit"},[t._v(t._s(e.taskExamName)+"("+t._s(e.highestScore)+")：")]),t._l(t.currentStu.taskExamScores,(function(s,n){return[e.id==s.taskExamId?[a("v-uni-input",{attrs:{type:"text",value:s.taskExamScore},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.changeScore(e,i,n)}}})]:t._e()]}))],2)})),1):t._e(),t.currentStu.taskExamScores?t._e():a("v-uni-view",{staticClass:"list list-item"},[a("v-uni-view",{staticClass:"examScores"},[a("v-uni-text",{staticClass:"stuInfo-tit"},[t._v("总分值：")]),a("v-uni-input",{attrs:{type:"text",value:t.currentStu.score},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.changeTotalScore.apply(void 0,arguments)}}})],1)],1)],1):t._e(),a("v-uni-view",{staticClass:"item-btn"},[a("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onBack()}}},[t._v("返回")]),a("v-uni-view",{staticClass:"btn save",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.save()}}},[t._v("保存")]),a("v-uni-view",{staticClass:"photo",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.takePhoto()}}},[a("i",{staticClass:"iconfont icon-zhaopian f-30"})])],1)],1)],1)},n=[]}}]);