(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-teacher-myclass-classdetail-addhomework"],{"0508":function(t,i,e){"use strict";var a=e("7214"),s=e.n(a);s.a},"0ec1":function(t,i,e){"use strict";e.r(i);var a=e("d725"),s=e.n(a);for(var n in a)"default"!==n&&function(t){e.d(i,t,(function(){return a[t]}))}(n);i["default"]=s.a},"306c":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".container[data-v-3441bae2]{height:100%;margin:%?20?%}uni-input[data-v-3441bae2]{width:%?510?%}.list-content[data-v-3441bae2]{width:70%}.list-content uni-input[data-v-3441bae2]{padding:%?2?%!important;margin:0!important;border-radius:0!important;width:65vw}.uni-input[data-v-3441bae2]{width:31vw;border:1px solid #f2f2f2;font-size:%?24?%;width:%?234?%;height:%?50?%;line-height:%?50?%;padding:0 %?10?%}.list-input .uni-input[data-v-3441bae2]{width:%?100?%}.item[data-v-3441bae2]{border-radius:%?10?%!important;margin-top:%?20?%}.devider[data-v-3441bae2]{margin:0 %?10?%;font-size:%?25?%}.timeimg[data-v-3441bae2]{width:%?30?%;height:%?30?%;margin-right:%?10?%}.box[data-v-3441bae2]{width:%?30?%;height:%?30?%;border:1px solid #878787;margin-top:%?15?%;margin-right:%?10?%;line-height:%?30?%}.totalscore[data-v-3441bae2]{text-align:right;border-top:1px solid #f2f2f2;border-bottom:1px solid #f2f2f2;height:%?100?%;line-height:%?100?%;padding-right:%?100?%;background-color:#fff}uni-textarea[data-v-3441bae2]{border:1px solid #f2f2f2;padding:%?10?%;font-size:%?25?%;max-height:%?100?%;width:63vw}[data-v-3441bae2] .uni-input-input,[data-v-3441bae2] .uni-input-placeholder{font-size:%?25?%;padding:%?5?%;width:%?550?%}[data-v-3441bae2] .uni-textarea-compute, .uni-textarea-line[data-v-3441bae2], .uni-textarea-placeholder[data-v-3441bae2], .uni-textarea-textarea[data-v-3441bae2]{padding:5px;font-size:13px}.item .title[data-v-3441bae2],.item .main[data-v-3441bae2]{padding:%?20?%;background-color:#fff}.item .title[data-v-3441bae2]{font-size:%?32?%;font-weight:700;border-bottom:1px solid #f2f2f2;border-top:1px solid #f2f2f2}.list[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;padding:%?15?% 0}.list-item[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;height:%?60?%;line-height:%?60?%;padding:0 %?10?%;margin:0}.list-item uni-input[data-v-3441bae2]{margin-top:%?-15?%}.list-item-2[data-v-3441bae2]{height:%?80?%;line-height:%?80?%;background-color:#fff}.list-item-3[data-v-3441bae2]{width:33.33%}.list-item .list-tit[data-v-3441bae2]{width:%?500?%}.score[data-v-3441bae2]{width:70%;text-align:right}\n/* 12 */.list-input[data-v-3441bae2]{width:%?100?%;height:%?60?%;margin-top:%?27?%}.list-input uni-input[data-v-3441bae2]{width:%?100?%;padding:%?3?%}.font-color[data-v-3441bae2]{color:#707070}.list .list-tit[data-v-3441bae2]{min-width:%?150?%}.list .upload[data-v-3441bae2]{display:-webkit-inline-box;display:-webkit-inline-flex;display:inline-flex}.list .upload uni-image[data-v-3441bae2]{width:%?35?%;height:%?35?%;margin-right:%?20?%}.list .list-content-date[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;width:35vw}.list-conten[data-v-3441bae2] .uni-list{width:35vw}.text[data-v-3441bae2]{font-size:%?26?%;max-width:%?500?%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}[data-v-3441bae2] .uni-icon-cancel{margin-top:%?-16?%;margin-left:%?10?%}.p_photo_box[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start}.photo_list[data-v-3441bae2]{width:%?250?%;height:%?200?%;margin-right:%?20?%;border:1px solid #f4f4f4}.photo_list uni-video[data-v-3441bae2],\n.photo_list uni-image[data-v-3441bae2]{width:100%;height:100%}.imgs[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;width:70vw}.img-contaner[data-v-3441bae2]{width:%?150?%;height:%?160?%;border:%?2?% solid #f5f5f5;margin:%?20?% 0;margin-right:%?20?%;background:#f5f5f5;cursor:pointer;position:relative;display:-webkit-box;display:-webkit-flex;display:flex}.img-wi[data-v-3441bae2]{width:100%;height:100%}.file-contaner[data-v-3441bae2]{margin:%?20?% 0;cursor:pointer;position:relative;display:-webkit-box;display:-webkit-flex;display:flex}.close-img[data-v-3441bae2]{position:absolute;right:0;top:0;cursor:pointer}.item-btn .main[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:space-evenly;-webkit-justify-content:space-evenly;justify-content:space-evenly;background-color:#fff}.btn[data-v-3441bae2]{width:%?250?%;padding:%?15?%;color:silver;background-color:#fff;border:1px solid silver;border-radius:%?10?%;text-align:center}.save[data-v-3441bae2]{background-color:#0093ff;border:none;color:#fff}.icon-cancel[data-v-3441bae2]{width:%?50?%;height:%?50?%;position:absolute;top:%?-20?%;right:%?-20?%}.item-assessment .main[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap}.assessmentBtn[data-v-3441bae2]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;padding:%?10?% %?30?%;padding-bottom:%?40?%;background-color:#fff}.addAssessment[data-v-3441bae2]{display:inline-block;background-color:#0369d6;padding:%?10?%;border-radius:%?10?%;position:absolute;right:%?40?%}.addAssessment uni-text[data-v-3441bae2]{color:#fff;font-weight:500;padding:0 %?10?%}.addAssessment .icon[data-v-3441bae2]{margin-right:%?10?%;font-size:%?35?%}.addInput[data-v-3441bae2]{position:relative;display:-webkit-box;display:-webkit-flex;display:flex}.addInput .icon-cancel[data-v-3441bae2]{top:0;right:%?-50?%}.addInput uni-input[data-v-3441bae2]{width:%?200?%;padding:0;border-radius:0;margin:0}.score-text[data-v-3441bae2]{margin:0 %?20?%}[data-v-3441bae2] .item-assessment uni-checkbox .uni-checkbox-input{width:%?30?%;height:%?30?%;margin-top:%?10?%}[data-v-3441bae2] uni-checkbox .uni-checkbox-input.uni-checkbox-input-checked:before{font-size:%?25?%}.btn-group[data-v-3441bae2]{background-color:initial;padding:%?20?% 0}.btn-cancel[data-v-3441bae2]{background-color:#fff;color:#4d4d4d;border:none;height:%?60?%;line-height:%?60?%;width:%?300?%;margin-right:%?60?%}.btn-save[data-v-3441bae2]{background-color:#0369d6;height:%?80?%;line-height:%?80?%;width:100%}",""]),t.exports=i},3218:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return s})),e.d(i,"c",(function(){return n})),e.d(i,"a",(function(){return a}));var s=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"item"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"line f-20 bluecolor"},[t._v("|")]),t._v("作业信息")],1),a("v-uni-view",{staticClass:"main"},[a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"list-tit f-15 font-color"},[t._v("作业名称：")]),a("v-uni-view",{staticClass:"list-content"},[a("v-uni-input",{attrs:{type:"text",value:t.taskName,placeholder:""},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.changeName.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"list-tit f-15 font-color"},[t._v("起止时间：")]),a("v-uni-view",{staticClass:"list-content list-content-date"},[a("v-uni-view",{staticClass:"uni-list"},[a("v-uni-view",{staticClass:"uni-list-cell"},[a("v-uni-view",{staticClass:"uni-list-cell-db"},[a("v-uni-picker",{attrs:{mode:"date",value:t.taskBeginTime,start:t.startDate,end:t.endDate},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.taskBeginTime))])],1)],1)],1)],1),a("v-uni-view",{staticClass:"uni-list devider f-15 font-color"},[t._v("-")]),a("v-uni-view",{staticClass:"uni-list"},[a("v-uni-view",{staticClass:"uni-list-cell"},[a("v-uni-view",{staticClass:"uni-list-cell-db"},[a("v-uni-picker",{attrs:{mode:"date",value:t.taskEndTime,start:t.startDate,end:t.endDate},on:{change:function(i){arguments[0]=i=t.$handleEvent(i),t.bindDateChange2.apply(void 0,arguments)}}},[a("v-uni-view",{staticClass:"uni-input"},[t._v(t._s(t.taskEndTime))])],1)],1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"list-tit f-15 font-color"},[t._v("简述：")]),a("v-uni-view",{staticClass:"list-content"},[a("v-uni-textarea",{attrs:{value:t.taskDesc,placeholder:""},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.changeDesc.apply(void 0,arguments)}}})],1)],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"list-tit f-15 font-color"},[t._v("附件：")]),a("v-uni-view",{staticClass:"list-content"},[a("v-uni-view",{staticClass:"upload",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.upEnclosure()}}},[a("i",{staticClass:"iconfont icon-shangchuan bluecolor p-r-10 f-15"}),a("v-uni-text",{staticClass:"text bluecolor"},[t._v("上传附件")])],1),t._l(t.myEnclosureList,(function(i,s){return a("v-uni-view",{staticClass:"file-contaner"},[a("v-uni-text",{staticClass:"text"},[t._v(t._s(i.fileOriginalName))]),a("v-uni-image",{staticClass:"icon-cancel",attrs:{src:e("80a6")},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteFile(s)}}})],1)}))],2)],1),a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"list-tit f-15 font-color"},[t._v("图片：")]),a("v-uni-view",{staticClass:"list-content"},[a("v-uni-view",{staticClass:"upload",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.upPhoto()}}},[a("i",{staticClass:"iconfont icon-shangchuan bluecolor p-r-10 f-15"}),a("v-uni-text",{staticClass:"text bluecolor"},[t._v("上传图片")])],1),a("v-uni-view",{staticClass:"imgs"},t._l(t.pictureList,(function(i,s){return a("v-uni-view",{staticClass:"img-contaner"},[i.url?[a("v-uni-image",{staticClass:"img-wi",attrs:{src:i.url},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImg(i.url)}}})]:[a("v-uni-image",{staticClass:"img-wi",attrs:{src:t.photoUrl+i.moduleName+"/"+i.fileNewName},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.previewImg(t.photoUrl+i.moduleName+"/"+i.fileNewName)}}})],a("v-uni-image",{staticClass:"icon-cancel",attrs:{src:e("80a6")},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deletePhoto(s)}}})],2)})),1)],1)],1)],1)],1),a("v-uni-view",{staticClass:"item item-assessment"},[a("v-uni-view",{staticClass:"title"},[a("v-uni-text",{staticClass:"line f-20 bluecolor"},[t._v("|")]),t._v("考核信息"),a("v-uni-view",{staticClass:"addAssessment",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.assessment()}}},[a("v-uni-text",{staticClass:"text font-color f-15"},[t._v("+ 新增")])],1)],1),t.assessmentList.length>0?a("v-uni-view",{staticClass:"main"},t._l(t.assessmentList,(function(i,e){return a("v-uni-view",{key:i.name,staticClass:"list list-item list-item-3"},[i.isChecked?a("v-uni-text",{staticClass:"box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choice(e)}}},[t._v("√")]):t._e(),i.isChecked?t._e():a("v-uni-text",{staticClass:"box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.choice(e)}}}),a("v-uni-text",{staticClass:"f-15 font-color"},[t._v(t._s(i.taskExamName))])],1)})),1):t._e(),a("v-uni-view",{staticClass:"assessmentBtn"},[t.isAddAssessment?a("v-uni-view",{staticClass:"addInput"},[a("v-uni-text",{staticClass:"box",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.add()}}}),a("v-uni-input",{attrs:{type:"text",value:t.inputVal,placeholder:"请输入名字"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.onKeyInput.apply(void 0,arguments)}}}),a("v-uni-image",{staticClass:"icon-cancel",attrs:{src:e("80a6")},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.deleteInput()}}})],1):t._e()],1),t._l(t.assessmentList,(function(i,e){return a("v-uni-view",[i.isChecked?[a("v-uni-view",{staticClass:"list-item list-item-2"},[a("v-uni-view",{staticClass:"list-tit f-15 font-color"},[t._v("考核名称："+t._s(i.taskExamName))]),a("v-uni-view",{staticClass:"list-score f-15 font-color"},[t._v("分值")]),a("v-uni-view",{staticClass:"list-input"},[a("v-uni-input",{attrs:{type:"text",value:i.highestScore},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.scoreInput(i,e)}}})],1)],1)]:t._e()],2)})),a("v-uni-view",{staticClass:"totalscore f-15 font-color"},[t._v("总分值："+t._s(t.totalscore))])],2),a("v-uni-view",{staticClass:"item btn-group"},[a("v-uni-button",{staticClass:"btn-save f-15",attrs:{type:"primary",size:"mini","hover-class":"none"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.save()}}},[t._v("保存")])],1)],1)},n=[]},7214:function(t,i,e){var a=e("306c");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=e("4f06").default;s("82219fb6",a,!0,{sourceMap:!1,shadowMode:!1})},"80a6":function(t,i){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABjElEQVRYR+2WsUrDUBSG/3NDUl2FgkMbBykt9gl8CZ3qA4iTXcQXsC6O6mIXBx+gIOhLODopKcUlySAUXG0TmyNRA9XmNrc1chGaMbnnP1/+c+69h6D5Ic35sQD4fw70VlGMTLPBQB1EpY8eYvZJ4P5tFF7XfbzM0lfKDvTKhfURokMi2mVgSZLkFcxXBsRpxRs+qYAoATi21QDzBYiKKqJg7kckTjbc4XnW+kyArm0dMdDKEkr7TkCr6gbH02KnAjzahQMBPpsn+VjMTs0NOjINKcBXze+UbZdlYO4bEJuynpACOGUzrvn+L//+M5y5XfPCpqRMk68fSlgxhOUDWM4DgICBCAK78oz+T71UB7pr5h4zXeaRPNEg5mbVC9tKALnan2SUlCHVAce2bgBspTjQ4Sia+IvxdSRE3DeNlNjbmhtsqzmgHSDPHTBPCbQ3ofZtGLuW606Y9SCKAbQfxTGE1ssoaV6t13ECoXUgSSC0jmTjx6e2oTTPm/Hb3fFXwqq6mUOpqtC86xYA7yKJxCECBZu1AAAAAElFTkSuQmCC"},d725:function(t,i,e){"use strict";e("99af"),e("4160"),e("a434"),e("e25e"),e("159b"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a={data:function(){this.getDate({format:!0}),this.getDate({format:!0});return{id:null,workTypeId:null,taskName:null,isAddAssessment:!1,taskBeginTime:null,taskEndTime:null,taskDesc:null,inputVal:null,totalscore:0,examList:[],myEnclosureList:[],pictureList:[],assessmentList:[],photoUrl:this.$util.commonUrl()+this.$api.linkloadUrl}},onLoad:function(t){this.id=t.id,this.workTypeId=t.workId,this.getDefaultExam()},computed:{startDate:function(){return this.getDate("start")},endDate:function(){return this.getDate("end")}},methods:{getDefaultExam:function(){var t=this;this.$util.request(this.$api.stuDefaultExam,{id:this.id},"POST").then((function(i){for(var e=i.datas,a=0;a<e.length;a++)e[a].isChecked=!1;t.assessmentList=e,t.countTotal()}))},assessment:function(){this.isAddAssessment=!0,this.inputVal=null},changeDesc:function(t){this.taskDesc=t.target.value},changeName:function(t){this.taskName=t.target.value},onKeyInput:function(t){this.inputVal=t.target.value},scoreInput:function(t,i){this.assessmentList[i].highestScore=null,this.countTotal();var e=parseInt(this.totalscore)+parseInt(t.detail.value);e>100?this.$util.toast("总分值不能超过100！"):this.assessmentList[i].highestScore=t.detail.value,this.countTotal()},countTotal:function(){for(var t=this.assessmentList,i=0,e=!1,a=0;a<t.length;a++)if(t[a].isChecked){e=!0;var s=t[a].highestScore?t[a].highestScore:"0";i+=parseInt(s)}this.totalscore=e?i:100},add:function(){if(this.inputVal){var t={highestScore:0,sort:0,isChecked:!1,taskExamName:this.inputVal};this.assessmentList.push(t),this.isAddAssessment=!1}},choice:function(t){this.assessmentList[t].isChecked=!this.assessmentList[t].isChecked,this.assessmentList[t].highestScore=null,this.countTotal()},getDate:function(t){var i=new Date,e=i.getFullYear(),a=i.getMonth()+1,s=i.getDate();return"start"===t?e=e:"end"===t&&(e+=2),a=a>9?a:"0"+a,s=s>9?s:"0"+s,"".concat(e,"-").concat(a,"-").concat(s)},bindDateChange:function(t){this.taskEndTime<t.target.value?this.$util.toast("开始日期必须小于结束日期"):this.taskBeginTime=t.target.value},bindDateChange2:function(t){this.taskBeginTime>t.target.value?this.$util.toast("开始日期必须小于结束日期"):this.taskEndTime=t.target.value},upEnclosure:function(){var t=this;uni.chooseFile({count:3,extension:[".zip",".doc"],success:function(i){var e=i.tempFilePaths,a=i.tempFiles[0].name,s=!1;if(t.myEnclosureList.forEach((function(i){a==i.fileOriginalName&&(s=!0,t.$util.toast("已上传过该文件"))})),!s)for(var n=0;n<e.length;n++)t.$util.uploadFile(t.$api.uploadUrl,e[n]).then((function(i){200===i.status&&t.myEnclosureList.push({id:i.datas.id,url:t.$util.commonUrl()+t.$api.linkloadUrl+i.datas.moduleName+"/"+i.datas.fileNewName,fileNewName:i.datas.fileNewName,fileOriginalName:i.datas.fileOriginalName,uploadType:2})}))}})},upPhoto:function(){var t=this;uni.chooseImage({count:6,sizeType:["original"],success:function(i){if("chooseImage:ok"===i.errMsg){var e=i.tempFilePaths,a=i.tempFiles[0].name,s=!1;if(t.pictureList.forEach((function(i){a==i.fileOriginalName&&(s=!0,t.$util.toast("已上传过该图片"))})),!s)for(var n=0;n<e.length;n++)t.$util.uploadFile(t.$api.uploadUrl,e[n]).then((function(i){200===i.status&&t.pictureList.push({id:i.datas.id,fileOriginalName:i.datas.fileOriginalName,url:t.$util.commonUrl()+t.$api.linkloadUrl+i.datas.moduleName+"/"+i.datas.fileNewName,uploadType:1})}))}}})},deletePhoto:function(t){this.pictureList.splice(t,1)},deleteFile:function(t){this.myEnclosureList.splice(t,1)},deleteInput:function(){this.isAddAssessment=!1,this.inputVal=null},previewImg:function(t){var i=[];i[0]=t,uni.previewImage({current:0,urls:i})},save:function(){for(var t=this.pictureList.concat(this.myEnclosureList),i=this.assessmentList,e=[],a=[],s=0;s<i.length;s++)i[s].isChecked&&i[s].highestScore&&a.push({highestScore:i[s].highestScore,sort:0,taskExamName:i[s].taskExamName});for(var n=0;n<t.length;n++)e.push({sourceId:t[n].id,uploadType:t[n].uploadType});var l={examParams:a,id:null,materialParams:e,taskBeginTime:this.taskBeginTime,taskEndTime:this.taskEndTime,taskContentId:this.id,taskDesc:this.taskDesc,taskName:this.taskName,workTypeId:this.workTypeId};this.$util.request(this.$api.teacherCreatTask,l,"POST").then((function(t){200==t.status&&(uni.showToast({title:t.message,duration:1e3}),setTimeout((function(){uni.navigateBack()}),2e3))}))},onBack:function(){return uni.navigateBack(),!0}}};i.default=a},d82a:function(t,i,e){"use strict";e.r(i);var a=e("3218"),s=e("0ec1");for(var n in s)"default"!==n&&function(t){e.d(i,t,(function(){return s[t]}))}(n);e("0508");var l,o=e("f0c5"),c=Object(o["a"])(s["default"],a["b"],a["c"],!1,null,"3441bae2",null,!1,a["a"],l);i["default"]=c.exports}}]);