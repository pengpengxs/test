(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-teacher-leavemanage-leaveapproval-leaveapproval"],{6123:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".blockone[data-v-d0b0f288]{overflow:hidden;background-color:#fff;padding:%?20?%;margin:%?20?% 0}.photo[data-v-d0b0f288]{border:1px solid #f6f6f6;width:20%;height:%?170?%;float:left;margin-right:%?20?%}.onemsg[data-v-d0b0f288]{width:77%;float:left;margin-top:%?20?%}.seficon[data-v-d0b0f288]{width:%?32?%;height:%?32?%;display:inline-block;vertical-align:middle}.phonemsg[data-v-d0b0f288]{margin:%?16?% 0}.phonemsg uni-text[data-v-d0b0f288]{font-size:%?20?%}.classmsg[data-v-d0b0f288]{color:#bdbdbd}.classmsg uni-text[data-v-d0b0f288]{font-size:%?24?%;margin:0 %?20?%}.classmsg uni-text[data-v-d0b0f288]:first-child{margin-left:0}.leaveTimebox[data-v-d0b0f288]{margin-bottom:%?30?%}.leavetitle[data-v-d0b0f288]{font-size:%?24?%;color:#5a5a5a}.leaveTime[data-v-d0b0f288]{margin:%?20?% 0 0 %?60?%}.leavetext[data-v-d0b0f288]{color:#333;font-size:%?24?%}.leaveimg[data-v-d0b0f288]{width:%?120?%;height:%?120?%;margin-right:%?10?%}.steps[data-v-d0b0f288]{overflow:hidden;position:relative}.steps .steps_dot[data-v-d0b0f288]{display:inline-block;width:%?20?%;height:%?20?%;border-radius:50%;background-color:#fff;border:%?4?% solid #0369d6;position:absolute;top:0;left:0}.steps .steps_dot.dot1[data-v-d0b0f288]{border:%?4?% solid #52c41a}.steps .steps_dot.dot2[data-v-d0b0f288]{border:%?4?% solid #ff9866}.steps .steps_dot.dot3[data-v-d0b0f288]{border:%?4?% solid #f5222d}.steps .steps_dot.dot4[data-v-d0b0f288]{border:%?4?% solid #d9d9d9}.steps .steps_cont[data-v-d0b0f288]{padding:0 0 %?20?% %?30?%;position:relative;border-left:1px solid #d9d9d9;margin-left:4px;min-height:%?50?%}.steps .steps_last[data-v-d0b0f288]{border-left:0;min-height:0;padding-bottom:0}.steps .steps_title[data-v-d0b0f288]{color:#333;font-size:%?24?%;position:relative;top:%?-2?%}.steps .steps_title1[data-v-d0b0f288]{color:#333;font-size:%?24?%;position:relative;top:%?-6?%}.steps .steps_desc[data-v-d0b0f288]{color:#8d8d8d;font-size:%?24?%;margin-left:%?20?%}.steps .steps_name uni-text[data-v-d0b0f288]{font-size:%?20?%}.steps .steps_time[data-v-d0b0f288]{position:absolute;right:0;top:%?6?%;font-size:%?20?%}.toright[data-v-d0b0f288]{float:right}.selteacher[data-v-d0b0f288]{vertical-align:middle}.approvalno[data-v-d0b0f288]{display:inline-block;width:%?200?%;height:%?70?%;line-height:%?70?%;text-align:center;color:#fc544b;border:1px solid #fc544b;border-radius:%?14?%;margin-right:%?36?%}.approvalyes[data-v-d0b0f288]{display:inline-block;width:%?440?%;height:%?70?%;line-height:%?70?%;text-align:center;color:#fff;background-color:#0369d6;border:1px solid #0369d6;border-radius:%?14?%}",""]),t.exports=e},"6b6c":function(t,e,a){"use strict";var i=a("e919"),s=a.n(i);s.a},"8a28":function(t,e,a){"use strict";a.r(e);var i=a("9044"),s=a.n(i);for(var n in i)"default"!==n&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=s.a},9044:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a("8f16"),s=a("cebd"),n={data:function(){return{approvalid:null,approvalopoin:"",nextapproval:"",nextapprovalid:"",approvalObj:{},imgUrlbase:s.commonUrl()+i.linkloadUrl,isApproval:!1,tabIndex:0}},onBackPress:function(t){return uni.redirectTo({url:"/pages/teacher/leavemanage/leavelist/leavelist?tabIndex="+this.tabIndex}),!0},methods:{getApprovalDetail:function(t){var e=this;s.request(i.teacherDetailView,{id:t}).then((function(t){200===t.status&&(e.approvalObj=t.datas)}))},previewImg:function(t){var e=this,a=[];a[0]=e.imgUrlbase+t.moduleName+"/"+t.fileNewName,uni.previewImage({current:0,urls:a})},selapproval:function(){uni.navigateTo({url:"/pages/teacher/leavemanage/selectapproval/selectapproval?aid="+this.approvalid+"&id="+this.nextapprovalid+"&opini="+this.approvalopoin+"&isappr="+this.isApproval+"&tabIndex="+this.tabIndex})},textareaInput:function(t){this.approvalopoin=t.detail.value},approvalSend:function(t){var e=this,a="已同家长联系,情况属实,出校门请遵守交通规则并注意安全。";a=e.approvalopoin?e.approvalopoin:"已同家长联系,情况属实,出校门请遵守交通规则并注意安全。";var n={id:e.approvalid,nextApprover:e.nextapproval,nextApproverId:e.nextapprovalid,opinion:a,results:t};s.request(i.teacherDetailApproval,n).then((function(t){200===t.status?(uni.showToast({title:t.message,duration:1500,icon:"none"}),setTimeout((function(){uni.redirectTo({url:"/pages/teacher/leavemanage/leavelist/leavelist"})}),1500)):uni.showToast({title:t.message,duration:3e3,icon:"none"})}))},otherFun:function(t){var e=this;t&&(t.id&&t.name?(e.nextapproval=t.name,e.nextapprovalid=t.id):(e.nextapproval="",e.nextapprovalid=""),t.opini?e.approvalopoin=t.opini:e.approvalopoin="")}},onLoad:function(t){var e=this;t&&t.aid?(e.approvalid=t.aid,e.getApprovalDetail(t.aid),setTimeout((function(){e.approvalObj.nextApproverId&&(e.nextapproval=e.approvalObj.nextApprover,e.nextapprovalid=e.approvalObj.nextApproverId)}),1e3)):e.approvalid=null,t&&(e.isApproval=t.isappr,e.tabIndex=t.tabIndex)}};e.default=n},a2bc:function(t,e,a){"use strict";a.d(e,"b",(function(){return s})),a.d(e,"c",(function(){return n})),a.d(e,"a",(function(){return i}));var i={uniIcons:a("4b32").default},s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"blockone"},[a("v-uni-image",{staticClass:"photo",attrs:{src:t.imgUrlbase+t.approvalObj.photoAddr}}),a("v-uni-view",{staticClass:"onemsg"},[a("v-uni-view",[t._v(t._s(t.approvalObj.name))]),a("v-uni-view",{staticClass:"phonemsg"},[a("v-uni-image",{staticClass:"seficon",attrs:{src:"/static/images/ic_tel.png"}}),a("v-uni-text",[t._v(t._s(t.approvalObj.telephone))])],1),a("v-uni-view",{staticClass:"classmsg"},[a("v-uni-text",[t._v(t._s(t.approvalObj.collegeName))]),t._v("|"),a("v-uni-text",[t._v(t._s(t.approvalObj.majorName))]),t._v("|"),a("v-uni-text",[t._v(t._s(t.approvalObj.className))]),t._v("|"),a("v-uni-text",[t._v(t._s(t.approvalObj.gender))])],1)],1)],1),a("v-uni-view",{staticClass:"blockone"},[a("v-uni-view",{staticClass:"leaveTimebox"},[a("v-uni-view",{staticClass:"leavetitle"},[t._v("请假时间")]),a("v-uni-view",{staticClass:"leaveTime"},[a("v-uni-view",{staticClass:"steps"},[a("v-uni-view",{staticClass:"steps_cont"},[a("v-uni-view",{staticClass:"steps_title"},[t._v(t._s(t.approvalObj.leaveStartTime))])],1),a("v-uni-view",{staticClass:"steps_dot"})],1),a("v-uni-view",{staticClass:"steps"},[a("v-uni-view",{staticClass:"steps_cont steps_last"},[a("v-uni-view",{staticClass:"steps_title"},[t._v(t._s(t.approvalObj.leaveEndTime))])],1),a("v-uni-view",{staticClass:"steps_dot"})],1)],1)],1),a("v-uni-view",{staticClass:"leaveTimebox"},[a("v-uni-view",{staticClass:"leavetitle"},[t._v("请假事由及目的地")]),a("v-uni-view",{staticClass:"leaveTime"},[a("v-uni-view",{staticClass:"leavetext"},[t._v(t._s(t.approvalObj.reason))])],1)],1),t.approvalObj.pictures&&t.approvalObj.pictures.length>0?a("v-uni-view",{staticClass:"leaveTimebox"},[a("v-uni-view",{staticClass:"leavetitle"},[t._v("图片")]),a("v-uni-view",{staticClass:"leaveTime"},[a("v-uni-view",{staticClass:"leavetext"},t._l(t.approvalObj.pictures,(function(e){return a("v-uni-image",{staticClass:"leaveimg",attrs:{src:t.imgUrlbase+e.moduleName+"/"+e.fileNewName},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImg(e)}}})})),1)],1)],1):t._e(),t.approvalObj.entranceTime?a("v-uni-view",{staticClass:"leaveTimebox"},[a("v-uni-view",{staticClass:"leavetitle"},[t._v("进出校门时间")]),a("v-uni-view",{staticClass:"leaveTime"},[t.approvalObj.entranceTime?a("v-uni-view",{staticClass:"steps"},[a("v-uni-view",{staticClass:"steps_cont"},[a("v-uni-view",{staticClass:"steps_title"},[a("v-uni-text",[t._v(t._s(t.approvalObj.entranceTime))]),a("v-uni-text",{staticClass:"steps_desc"},[t._v("进校门")])],1)],1),a("v-uni-view",{staticClass:"steps_dot"})],1):t._e(),t.approvalObj.exportTime?a("v-uni-view",{staticClass:"steps"},[a("v-uni-view",{staticClass:"steps_cont steps_last"},[a("v-uni-view",{staticClass:"steps_title"},[a("v-uni-text",[t._v(t._s(t.approvalObj.exportTime))]),a("v-uni-text",{staticClass:"steps_desc"},[t._v("出校门")])],1)],1),a("v-uni-view",{staticClass:"steps_dot"})],1):t._e()],1)],1):t._e()],1),a("v-uni-view",{staticClass:"blockone"},[a("v-uni-view",{staticClass:"leavetitle"},[t._v("流程")]),a("v-uni-view",{staticClass:"leaveTime"},t._l(t.approvalObj.processes,(function(e,i){return a("v-uni-view",{staticClass:"steps"},[a("v-uni-view",{staticClass:"steps_cont",class:{steps_last:t.approvalObj.processes.length===i+1}},[a("v-uni-view",{staticClass:"steps_title1"},[a("v-uni-text",{},[t._v(t._s(e.stepName))]),a("v-uni-text",{staticClass:"steps_time"},[t._v(t._s(e.stepTime))])],1),a("v-uni-view",{staticClass:"steps_name"},[a("v-uni-text",[t._v(t._s(e.stepMember))]),e.stepInfo?a("v-uni-text",[t._v(":"+t._s(e.stepInfo))]):t._e()],1)],1),0==e.stepType||3==e.stepType?a("v-uni-view",{staticClass:"steps_dot dot1"}):t._e(),1==e.stepType||2==e.stepType||6==e.stepType?a("v-uni-view",{staticClass:"steps_dot dot2"}):t._e(),4==e.stepType?a("v-uni-view",{staticClass:"steps_dot dot3"}):t._e(),5==e.stepType?a("v-uni-view",{staticClass:"steps_dot dot4"}):t._e()],1)})),1)],1),t.isApproval&&"true"==t.isApproval?a("v-uni-view",{staticClass:"blockone"},[a("v-uni-view",{staticClass:"leavetitle"},[a("i",{staticStyle:{color:"red"}},[t._v("*")]),t._v("审批意见")]),a("v-uni-view",{staticClass:"leaveTime"},[a("v-uni-textarea",{staticStyle:{"min-height":"80rpx",fontSize:"28rpx"},attrs:{"auto-height":"true",value:t.approvalopoin,"placeholder-style":"color:#C0C0C0;fontSize:24rpx;",maxlength:"-1",placeholder:"已同家长联系,情况属实,出校门请遵守交通规则并注意安全。"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.textareaInput.apply(void 0,arguments)}}})],1)],1):t._e(),t.isApproval&&"true"==t.isApproval?a("v-uni-view",{staticClass:"blockone",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selapproval()}}},[a("v-uni-view",{staticClass:"leavetitle"},[a("v-uni-text",[t._v("下一审批人")]),a("v-uni-view",{staticClass:"toright"},[a("v-uni-text",{staticClass:"selteacher"},[t._v(t._s(t.nextapproval))]),a("uni-icons",{staticClass:"icon",staticStyle:{"vertical-align":"middle"},attrs:{type:"forward",size:"22",color:"#C3C3C3"}})],1)],1)],1):t._e(),t.isApproval&&"true"==t.isApproval?a("v-uni-view",{staticClass:"blockone"},[a("v-uni-view",{staticStyle:{"text-align":"center"}},[a("v-uni-view",{staticClass:"approvalno",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.approvalSend(0)}}},[t._v("不同意")]),a("v-uni-view",{staticClass:"approvalyes",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.approvalSend(1)}}},[t._v("同意")])],1)],1):t._e()],1)},n=[]},e919:function(t,e,a){var i=a("6123");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var s=a("4f06").default;s("a110073c",i,!0,{sourceMap:!1,shadowMode:!1})},f3ad:function(t,e,a){"use strict";a.r(e);var i=a("a2bc"),s=a("8a28");for(var n in s)"default"!==n&&function(t){a.d(e,t,(function(){return s[t]}))}(n);a("6b6c");var l,o=a("f0c5"),v=Object(o["a"])(s["default"],i["b"],i["c"],!1,null,"d0b0f288",null,!1,i["a"],l);e["default"]=v.exports}}]);