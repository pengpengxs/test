(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-teacher-mytrainroom-roomdetail"],{1344:function(t,i,e){"use strict";e.r(i);var a=e("c607"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,(function(){return a[t]}))}(s);i["default"]=n.a},"590f":function(t,i,e){"use strict";e.r(i);var a=e("e384"),n=e("1344");for(var s in n)"default"!==s&&function(t){e.d(i,t,(function(){return n[t]}))}(s);e("fd0e");var o,c=e("f0c5"),l=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"b43cd440",null,!1,a["a"],o);i["default"]=l.exports},"5c48":function(t,i,e){var a=e("8c68");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("3c757683",a,!0,{sourceMap:!1,shadowMode:!1})},"711a":function(t,i,e){t.exports=e.p+"static/img/search.c3ae348e.png"},"8c68":function(t,i,e){var a=e("24fb");i=a(!1),i.push([t.i,".container[data-v-b43cd440]{margin:%?20?%}.nodate_halfheight[data-v-b43cd440]{padding-top:50%}.roomelec[data-v-b43cd440],.equipElec[data-v-b43cd440]{background-color:#fff;padding:%?20?%}.roomelec .list-item[data-v-b43cd440]{height:%?60?%;line-height:%?60?%;border-bottom:none;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.title[data-v-b43cd440]{margin:%?20?% 0;font-weight:700}.equipElec .static span[data-v-b43cd440]{padding-right:%?4?%;color:#8c8c8c;font-size:%?24?%}.equipElec .static .line[data-v-b43cd440]{margin:0 %?10?%;border-left:1px solid #8c8c8c}.equipElec[data-v-b43cd440]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.equipElec .imgWrap .iconfont[data-v-b43cd440]{color:orange}.offLine[data-v-b43cd440]{margin:0 %?20?%;color:#0369d6}.btns[data-v-b43cd440]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.openAll[data-v-b43cd440],.closeAll[data-v-b43cd440]{height:%?50?%;line-height:%?50?%;margin-top:%?10?%;margin-left:%?20?%;padding:0 %?20?%;font-size:%?24?%;border-radius:%?10?%;border:1px solid #404040}.openAll[data-v-b43cd440]{background-color:#0369d6;color:#fff;border:none}.info[data-v-b43cd440]{line-height:%?50?%}.bt-white[data-v-b43cd440]{height:82vh;overflow:scroll;padding:%?20?%;padding-top:0;border-radius:0}.top[data-v-b43cd440]{padding:%?20?%;border-radius:0;background-color:#fff}.top .ic_search[data-v-b43cd440]{left:%?30?%;top:%?36?%}.btn[data-v-b43cd440]{font-size:%?24?%;height:%?60?%;line-height:%?60?%}.closeRoomAll[data-v-b43cd440],.openRoomAll[data-v-b43cd440]{height:%?50?%;line-height:%?50?%;margin-top:%?6?%;margin-right:0;background-color:#0369d6;color:#fff;padding:0 %?20?%}.item-dro[data-v-b43cd440]{line-height:40px;height:40px;display:block;float:left;width:100%;text-align:center}.roomdetail .top uni-input[data-v-b43cd440]{width:100%;padding:%?10?%;margin:0;padding-left:%?50?%}.roomdetail .top .uni-input-input[data-v-b43cd440]{padding-left:%?30?%}.roomdetail .top .btn-search[data-v-b43cd440]{background-color:#0369d6;height:%?60?%;line-height:%?60?%;margin-top:%?4?%;padding:0}.list-item[data-v-b43cd440]{height:%?80?%;line-height:%?80?%;border-bottom:1px solid #f5f5f5;display:-webkit-box;display:-webkit-flex;display:flex;margin:0}.table-tit-th[data-v-b43cd440]{height:%?80?%;line-height:%?80?%;font-weight:700;background-color:#e6e6e6;font-size:%?30?%}.tit-th[data-v-b43cd440]{font-size:%?30?%!important}.tit-th-4[data-v-b43cd440]{width:25%;padding-left:%?20?%}.tit-th-4 .text[data-v-b43cd440]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tit-th-3[data-v-b43cd440]{width:25%}.tit-th-2[data-v-b43cd440]{width:20%}.operateAll[data-v-b43cd440]{text-align:right;height:%?60?%;line-height:%?60?%;padding:0 %?20?%;border-radius:%?10?%}.operateAll .iconfont[data-v-b43cd440]{color:#666;vertical-align:middle}.operateAll  .icon-kai[data-v-b43cd440]{color:#34d152!important}.reminder[data-v-b43cd440]{display:-webkit-box;display:-webkit-flex;display:flex}.tit-th-status[data-v-b43cd440]{text-align:center}.isRed[data-v-b43cd440]{width:%?16?%;height:%?16?%;border-radius:10px;background-color:red;margin-right:%?10?%}.stopUse .iconfont[data-v-b43cd440]{color:red}.validate .iconfont[data-v-b43cd440]{color:#7d7d7d}",""]),t.exports=i},c607:function(t,i,e){"use strict";e("d81d"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=e("8f16"),n=e("cebd"),s={data:function(){return{id:null,name:"",number:"",currentTab:0,keywords:"",checkAll:!1,list:[],updateTime:null,equipNum:0,electrifyNum:0,onElectrifyNum:0,offLineNum:0,roomElecList:[],collegeCode:n.judgeObj().collegeCode}},onLoad:function(t){this.id=t.id,this.name=t.name,this.number=t.number,uni.setNavigationBarTitle({title:t.name}),this.getList(),this.getRoomElec()},methods:{inputChange:function(t){this.keywords=t.detail.value,this.getList()},getRoomElec:function(){var t=this;this.countTime(),n.request(a.findRoomOnOffByRoomId,{id:this.id}).then((function(i){i.datas.length>0&&(t.roomElecList=i.datas)}))},getList:function(){var t=this,i={id:this.id,name:this.keywords};n.request(a.equipmentSearch,i).then((function(i){if(i.datas.length>0){t.list=i.datas,t.equipNum=i.datas.length;var e=0,a=0,n=0;t.list.map((function(t){0==t.countStatus?e+=1:1==t.countStatus?a+=1:n+=1})),t.electrifyNum=e,t.onElectrifyNum=a,t.offLineNum=n}})),this.countTime()},showTips:function(){this.$util.toast("该设备不能通断电控制")},changeRoomStatus:function(t,i){var e=this,a=0==i?"开启":"关闭",n=0==i?"开启":"断电";uni.showModal({content:a+"实训室电源可能会造成安全问题，确认是否"+n+"?",cancelText:"暂不"+n,confirmText:"立即"+n,confirmColor:"#FF0000",success:function(i){i.confirm&&e.pullRoomStatus(t)}})},changeAllStatus:function(t){var i=this,e=0==i.checkAll;i.checkAll=!i.checkAll;var a=1==t?"开启":"关闭",n=1==t?"开启":"断电";uni.showModal({content:a+"设备可能会造成安全问题，确认是否"+n+"?",cancelText:"暂不"+n,confirmText:"立即"+n,confirmColor:"#FF0000",success:function(t){t.confirm&&i.pullAllStatus(e)}})},changeStatus:function(t,i){var e=this,a=0!=t.status;t.status;0==t.status?uni.showModal({title:"确认断电?",content:"",success:function(i){i.confirm&&e.pullStatus(t.deviceOnId,a)}}):e.pullStatus(t.deviceOnId,a)},pullRoomStatus:function(t){var i=this,e=0==t.status?a.openRoomAll:a.closeRoomAll;n.request(e,[t.id]).then((function(t){200==t.status&&i.getList()})),this.countTime()},pullStatus:function(t,i){var e=this,s={id:t,status:i};n.request(a.controlStatus,s).then((function(t){200==t.status&&e.getList()})),this.countTime()},pullAllStatus:function(t){for(var i=this,e=this.list,s=[],o=0;o<e.length;o++)null!=e[o].deviceOnId&&s.push(e[o].deviceOnId);var c={ids:s,status:t};n.request(a.controlAllStatus,c).then((function(t){200==t.status&&(uni.showToast({title:t.message,duration:2e3}),setTimeout((function(){i.getList()}),2e3))})),this.countTime()},changeKeyword:function(t){this.keywords=t.detail.value},goDetail:function(t){uni.navigateTo({url:"./equipdetail?name="+t.name+"&number="+t.number+"&id="+t.id+"&roomid="+this.id})},countTime:function(){this.updateTime=n.getTimer(new Date)}}};i.default=s},e384:function(t,i,e){"use strict";var a;e.d(i,"b",(function(){return n})),e.d(i,"c",(function(){return s})),e.d(i,"a",(function(){return a}));var n=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"container roomdetail"},[5==t.collegeCode?[a("v-uni-view",{staticClass:"title"},[t._v("实训室电源")]),a("v-uni-view",{staticClass:"roomelec"},t._l(t.roomElecList,(function(i,e){return a("v-uni-view",{key:e,staticClass:"list-item"},[a("span",{staticClass:"port"},[t._v("回路号："+t._s(i.roomCircuitNumber))]),0==i.status?a("v-uni-button",{staticClass:"btn openRoomAll",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeRoomStatus(i,0)}}},[t._v("一键开启")]):t._e(),2==i.status?a("span",{staticClass:"offLine"},[t._v("未在线")]):t._e(),1==i.status?a("v-uni-button",{staticClass:"btn openRoomAll",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.changeRoomStatus(i,1)}}},[t._v("一键断电")]):t._e()],1)})),1),a("v-uni-view",{staticClass:"title"},[t._v("设备电源")]),a("v-uni-view",{staticClass:"equipElec"},[a("v-uni-view",{staticClass:"imgWrap"},[a("i",{staticClass:"iconfont icon-dianyuan f-50"})]),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"time"},[t._v("更新时间： "+t._s(t.updateTime))]),a("v-uni-view",{staticClass:"static"},[a("span",[t._v("设备数："+t._s(t.equipNum))]),a("span",{staticClass:"line"}),a("span",[t._v("已断电："+t._s(t.onElectrifyNum))]),a("span",{staticClass:"line"}),a("span",[t._v("已通电："+t._s(t.electrifyNum))]),a("span",{staticClass:"line"}),a("span",[t._v("未在线："+t._s(t.offLineNum))])]),a("v-uni-view",{staticClass:"btns"},[a("v-uni-view",{staticClass:"openAll",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeAllStatus(1)}}},[t._v("一键开启")]),a("v-uni-view",{staticClass:"closeAll",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.changeAllStatus(0)}}},[t._v("一键断电")])],1)],1)],1)]:t._e(),a("v-uni-view",{staticClass:"top"},[a("v-uni-image",{staticClass:"ic_search",attrs:{src:e("711a")}}),a("v-uni-input",{attrs:{type:"text",placeholder:"搜索设备编号/名称"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.inputChange(i)}},model:{value:t.keywords,callback:function(i){t.keywords=i},expression:"keywords"}})],1),a("v-uni-view",{staticClass:"bt-white"},[a("v-uni-view",{staticClass:"table-tit-th"},[a("v-uni-view",{staticClass:"tit-th tit-th-4 f-15"},[t._v("设备编号")]),a("v-uni-view",{staticClass:"tit-th tit-th-4 f-15"},[t._v("设备名称")]),a("v-uni-view",{staticClass:"tit-th tit-th-4 f-15 tit-th-status"},[t._v("状态")]),a("v-uni-view",{staticClass:"tit-th tit-th-4 f-15"},[t._v("使用时长")])],1),t._l(t.list,(function(i,e){return a("v-uni-view",{key:e,staticClass:"list-item"},[a("v-uni-view",{staticClass:"tit-th tit-th-4",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goDetail(i)}}},[t._v(t._s(i.number))]),a("v-uni-view",{staticClass:"tit-th tit-th-4 reminder",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goDetail(i)}}},[a("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:i.remind,expression:"item.remind"}],staticClass:"isRed"}),a("v-uni-view",{staticClass:"text"},[t._v(t._s(i.name))])],1),a("v-uni-view",{staticClass:"tit-th tit-th-4 tit-th-status"},[0==i.status?a("v-uni-view",[a("i",{staticClass:"iconfont icon-kai f-30",staticStyle:{color:"#34D152"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.changeStatus(i,e)}}})]):t._e(),1==i.status?a("v-uni-view",[a("i",{staticClass:"iconfont icon-guan f-30",on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.changeStatus(i,e)}}})]):t._e(),2==i.status?a("v-uni-view",{staticClass:"validate",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.showTips()}}},[a("i",{staticClass:"iconfont icon-kai f-30"})]):t._e(),3==i.status?a("v-uni-view",{staticClass:"stopUse"},[a("i",{staticClass:"iconfont icon-guan f-30"})]):t._e()],1),a("v-uni-view",{staticClass:"tit-th-4"},[t._v(t._s(i.tiems)+"机时")])],1)})),t.list.length<=0?a("v-uni-view",{staticClass:"nodate_halfheight"},[a("v-uni-image",{staticClass:"nodate_img",attrs:{src:"/static/images/bigequip/wushuju@2x.png"}}),a("v-uni-view",{staticClass:"nodate_text"},[t._v("暂无数据")])],1):t._e()],2)],2)},s=[]},fd0e:function(t,i,e){"use strict";var a=e("5c48"),n=e.n(a);n.a}}]);